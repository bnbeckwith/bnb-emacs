<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-03-13 Mon 13:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BNBECKWITH Tangled Emacs Initialization</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Benjamin Beckwith" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">BNBECKWITH Tangled Emacs Initialization</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc2cea62">1. Installation</a></li>
<li><a href="#orgf19e8e7">2. Notes</a>
<ul>
<li><a href="#orge424381">2.1. Pending sections</a></li>
</ul>
</li>
<li><a href="#org518825d">3. Personal Information</a></li>
<li><a href="#orgf7ad7f8">4. Local customizations (custom.el)</a></li>
<li><a href="#orged5f7e1">5. Small Settings</a>
<ul>
<li><a href="#orge15504c">5.1. Super keys</a></li>
<li><a href="#org542c653">5.2. Package archives</a>
<ul>
<li><a href="#org6a781f0">5.2.1. From Source</a></li>
</ul>
</li>
<li><a href="#org1844685">5.3. Binding Keys</a></li>
<li><a href="#org94c43ec">5.4. Hydra</a></li>
<li><a href="#org1edf94b">5.5. Personal Keymaps</a>
<ul>
<li><a href="#org357bf40">5.5.1. Toggle Map</a></li>
<li><a href="#orga73a7c7">5.5.2. Elisp Maps</a></li>
<li><a href="#orga3becd5">5.5.3. Small bindings</a></li>
<li><a href="#org5c995cf">5.5.4. Kill current buffer</a></li>
</ul>
</li>
<li><a href="#org89b9247">5.6. Minibuffer History Save</a></li>
<li><a href="#org4d17157">5.7. Abbrev</a></li>
<li><a href="#orga7793b9">5.8. Hippie Expand</a></li>
<li><a href="#org29ec861">5.9. Emacs Bookmarks</a></li>
<li><a href="#org0997fa3">5.10. Writegood Mode</a></li>
<li><a href="#org97cd44c">5.11. Spell Checking</a></li>
<li><a href="#org5a2dc00">5.12. Development</a></li>
<li><a href="#orgbbfbdd4">5.13. Encryption</a></li>
<li><a href="#org5ae932f">5.14. Read-only helpers</a></li>
<li><a href="#orgeaaaeec">5.15. Default File encoding</a></li>
<li><a href="#org20453da">5.16. Vimrc generic mode</a></li>
<li><a href="#org9d84130">5.17. Ediff single frame</a></li>
<li><a href="#org9d1a59f">5.18. Git</a>
<ul>
<li><a href="#orga2f4193">5.18.1. Magit</a></li>
<li><a href="#orgb7b662a">5.18.2. Git timemachine&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
</ul>
</li>
<li><a href="#orgfe8091b">5.19. Open/Edit This file</a></li>
<li><a href="#org9ec4d57">5.20. Sounds</a></li>
<li><a href="#org2e9748d">5.21. Midnight Mode</a></li>
<li><a href="#org70c6b8c">5.22. Which Key</a></li>
<li><a href="#org20f328f">5.23. Ace Utilities</a>
<ul>
<li><a href="#org24ddb47">5.23.1. Ace Window</a></li>
<li><a href="#org0f76372">5.23.2. Avy Goto</a></li>
</ul>
</li>
<li><a href="#org85b9683">5.24. Edit Server</a></li>
<li><a href="#org804540b">5.25. Regexp-Builder</a></li>
<li><a href="#orgf8ab752">5.26. IBuffer</a>
<ul>
<li><a href="#orgba0d06a">5.26.1. Groups</a></li>
</ul>
</li>
<li><a href="#org769c777">5.27. Multiple Cursors</a></li>
<li><a href="#org557c5ae">5.28. Expand Region</a></li>
<li><a href="#org3c467c6">5.29. Hooks</a>
<ul>
<li><a href="#org78479d0">5.29.1. Ensure proper lisping</a></li>
<li><a href="#orgc1032eb">5.29.2. Auto Reverting in modes</a></li>
</ul>
</li>
<li><a href="#org3c17838">5.30. Recentf</a></li>
<li><a href="#org822c59f">5.31. Executable Scripts on save</a></li>
<li><a href="#orgd5c2919">5.32. Scroll Screen Position</a></li>
<li><a href="#org8962b75">5.33. Unique Buffer Names</a></li>
<li><a href="#orge09c137">5.34. Focus Mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
<li><a href="#orgcb05399">5.35. Paperless Mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
<li><a href="#orgf15d1ba">5.36. Relative line numbers&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
<li><a href="#orgc7e405c">5.37. ImageMagick</a></li>
</ul>
</li>
<li><a href="#org3dca6ae">6. Style</a>
<ul>
<li><a href="#org40a4a18">6.1. Frame Changes</a></li>
<li><a href="#org7472093">6.2. Window Changes</a></li>
<li><a href="#org4031c3c">6.3. Faces</a>
<ul>
<li><a href="#org8dad21b">6.3.1. Default Fonts</a></li>
<li><a href="#org8c3923f">6.3.2. Trying out fonts on Windows</a></li>
<li><a href="#org0df1a1b">6.3.3. Dynamic Font sizes</a></li>
<li><a href="#org73f28a2">6.3.4. Mode Line Style</a></li>
<li><a href="#orgabd49be">6.3.5. Missing Glyphs</a></li>
</ul>
</li>
<li><a href="#org530cd7f">6.4. Themes</a>
<ul>
<li><a href="#org7af705f">6.4.1. Extra Themes</a></li>
<li><a href="#orgd0e9cc1">6.4.2. Remember last themes</a></li>
</ul>
</li>
<li><a href="#org7f21adb">6.5. Smart Mode Line</a></li>
<li><a href="#org16de0a2">6.6. Font lock profiling&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
</ul>
</li>
<li><a href="#org86aa8d9">7. BNB Helpers</a>
<ul>
<li><a href="#orgdbd592d">7.1. Exit behavior</a></li>
<li><a href="#org7d35354">7.2. Workweeks</a></li>
<li><a href="#orgec75d31">7.3. Better window splitting functions</a></li>
<li><a href="#org76bb8f7">7.4. Weekly Time Reporting</a></li>
<li><a href="#org962d1bb">7.5. Weekly Score Goal in Org-Agenda</a></li>
<li><a href="#org3286ed3">7.6. Calendars</a></li>
<li><a href="#org628b563">7.7. Auto-display agenda</a></li>
<li><a href="#orgb4821f1">7.8. Transparency</a></li>
<li><a href="#org89aa292">7.9. Styled HTML Export</a></li>
<li><a href="#org160e26a">7.10. Auto-indent when pasting</a></li>
<li><a href="#org99e5747">7.11. Hide mode line&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></a></li>
</ul>
</li>
<li><a href="#orgd7596cf">8. Company</a></li>
<li><a href="#org12dbdce">9. File Management</a>
<ul>
<li><a href="#org2161f65">9.1. Dired</a></li>
<li><a href="#orge45ecd8">9.2. Sunrise Commander</a></li>
</ul>
</li>
<li><a href="#org494e14c">10. Smart Tabs</a>
<ul>
<li><a href="#org5fd7588">10.1. Notes</a></li>
</ul>
</li>
<li><a href="#orgc93a615">11. CUA mode</a>
<ul>
<li><a href="#orga8eee59">11.1. Bindings</a>
<ul>
<li><a href="#orge813295">11.1.1. CUA Rectangles</a></li>
<li><a href="#orgab71df0">11.1.2. CUA Global Mark</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org3a7685a">12. Paredit</a></li>
<li><a href="#orgc38fb77">13. Paxedit</a></li>
<li><a href="#orga6fd325">14. Projectile</a></li>
<li><a href="#orgcb7122c">15. Programming Languages</a>
<ul>
<li><a href="#org1710d3e">15.1. Rust</a></li>
<li><a href="#org3525fe9">15.2. Clojure</a>
<ul>
<li><a href="#orgba61363">15.2.1. Cider</a></li>
<li><a href="#org20be614">15.2.2. clj-refactor</a></li>
</ul>
</li>
<li><a href="#org2a14535">15.3. Elisp</a></li>
</ul>
</li>
<li><a href="#org668dc4c">16. Ivy, Counsel and Swiper</a>
<ul>
<li><a href="#org23503c2">16.1. Smex</a></li>
</ul>
</li>
<li><a href="#orgbe379b8">17. IDO (Interactively Do Things)</a>
<ul>
<li><a href="#org98a0626">17.1. Keystrokes</a></li>
</ul>
</li>
<li><a href="#orga53baee">18. Shells</a>
<ul>
<li><a href="#org4c92992">18.1. Ansi Term</a></li>
<li><a href="#org6945198">18.2. Eshell</a>
<ul>
<li><a href="#org87d83b5">18.2.1. Eshell Settings</a></li>
<li><a href="#org3434e69">18.2.2. Eshell Commands</a></li>
<li><a href="#org3a6cd0b">18.2.3. Plan 9 Smart Shells</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc99a043">19. AucTeX</a>
<ul>
<li><a href="#orgee5bc11">19.1. RefTeX</a></li>
<li><a href="#org793967e">19.2. TeX Settings</a></li>
<li><a href="#org4070477">19.3. XeTeX settings</a></li>
<li><a href="#org7870f69">19.4. DocView</a></li>
</ul>
</li>
<li><a href="#orge681625">20. Orgmode</a>
<ul>
<li><a href="#org2bd3224">20.1. Orgmode Initialization</a></li>
<li><a href="#org3c6fdff">20.2. Auto mode</a></li>
<li><a href="#orgc50038e">20.3. Hooks</a></li>
<li><a href="#org90d5ec0">20.4. Keys</a>
<ul>
<li><a href="#orgde9bdc9">20.4.1. Global</a></li>
<li><a href="#orgac32c42">20.4.2. Speed</a></li>
</ul>
</li>
<li><a href="#org7d8daa8">20.5. Org TODO Configuration</a>
<ul>
<li><a href="#orgf3eddb9">20.5.1. Keywords</a></li>
<li><a href="#org7df4e52">20.5.2. Tags</a></li>
<li><a href="#org740e7ca">20.5.3. Mechanics</a></li>
</ul>
</li>
<li><a href="#orgad096a4">20.6. Capture</a>
<ul>
<li><a href="#org732b9ac">20.6.1. Capture-template helpers for data tables</a></li>
</ul>
</li>
<li><a href="#org7da124e">20.7. Refile</a></li>
<li><a href="#org2f0d62e">20.8. Agenda</a>
<ul>
<li><a href="#orga94f6ac">20.8.1. Views</a></li>
</ul>
</li>
<li><a href="#orgfefd52e">20.9. Export</a>
<ul>
<li><a href="#orga393e52">20.9.1. HTML</a></li>
<li><a href="#org0fb0449">20.9.2. LaTeX</a></li>
<li><a href="#org5b64f96">20.9.3. Office Documents</a></li>
<li><a href="#orgcc3ea17">20.9.4. EPUB</a></li>
</ul>
</li>
<li><a href="#org346592c">20.10. Clocking</a></li>
<li><a href="#org407dd53">20.11. Modules</a>
<ul>
<li><a href="#orge18a06f">20.11.1. Org-protocol</a></li>
<li><a href="#org667a808">20.11.2. Crypt</a></li>
<li><a href="#org0e75911">20.11.3. Habit</a></li>
</ul>
</li>
<li><a href="#org77c903c">20.12. Babel</a>
<ul>
<li><a href="#orgcb5fee7">20.12.1. Extra Babel Packages</a></li>
</ul>
</li>
<li><a href="#org1cc0da9">20.13. Miscellaneous Settings</a>
<ul>
<li><a href="#orge9add60">20.13.1. Columns</a></li>
<li><a href="#org25676b8">20.13.2. Automatically save org files</a></li>
<li><a href="#org5ee629c">20.13.3. File Applications</a></li>
<li><a href="#org55d26d0">20.13.4. Goto Interface</a></li>
<li><a href="#org52dce0a">20.13.5. Special Control Keys</a></li>
<li><a href="#org77f5a80">20.13.6. Auto-revert mode</a></li>
<li><a href="#org7d03103">20.13.7. IDO Integration</a></li>
<li><a href="#org74c2c51">20.13.8. Display settings</a></li>
<li><a href="#org9c5cec4">20.13.9. Insertion</a></li>
<li><a href="#orge6f58f7">20.13.10. Properties</a></li>
<li><a href="#org64fef65">20.13.11. Calendar</a></li>
</ul>
</li>
<li><a href="#orgbfedea1">20.14. Org-drill</a></li>
</ul>
</li>
<li><a href="#orgec15b30">21. Calc</a></li>
<li><a href="#org76c4b81">22. Server</a></li>
<li><a href="#org73f00b9">23. Local customizations (custom.el)</a></li>
<li><a href="#orgde3210c">24. Local customizations (user-login-name)</a></li>
</ul>
</div>
</div>
<p>
This document tangles (in literate programming style) the necessary
commands to initialize Emacs to my liking and the documentation for my
choices.
</p>

<p>
To clone, go to the <a href="http://github.com/bnbeckwith/bnb-emacs">github repository</a>. For a pretty view, head over to
the <a href="http://bnbeckwith.github.com/bnb-emacs">generated page</a>.
</p>

<div id="outline-container-orgc2cea62" class="outline-2">
<h2 id="orgc2cea62"><span class="section-number-2">1</span> Installation</h2>
<div class="outline-text-2" id="text-1">
<p>
My <code>init.el</code> file is quite simple and is generated by the following
block.  Essentially, I just have to install this package
(<code>bnb-emacs</code>) in the <code>~/.emacs.d/</code> directory and run the code block
(<code>C-c C-c</code>) to bootstrap the system.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">package</span>)
(<span style="color: #718c00;">setq</span> package-enable-at-startup nil)
(package-initialize)

(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">ob-tangle</span>)
(org-babel-load-file <span style="color: #3e999f;">"~/.emacs.d/bnb-emacs/Readme.org"</span>)
</pre>
</div>

<p>
The bootstrapping is simple.  Emacs find <code>~/.emacs.d/init.el</code> and
runs the code. The first step is to initialize the packages I have
installed via ELPA and others.
</p>

<p>
Next, I load <code>ob-tangle</code> (part of <code>org-mode</code>). Then
<code>org-babel-load-file</code> extracts the emacs-lisp code blocks in this
document and loads the resulting <code>Readme.org</code>.
</p>

<p>
As I add packages or lines to this document, my initialization is
already in place and ready to go.
</p>
</div>
</div>

<div id="outline-container-orgf19e8e7" class="outline-2">
<h2 id="orgf19e8e7"><span class="section-number-2">2</span> Notes</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orge424381" class="outline-3">
<h3 id="orge424381"><span class="section-number-3">2.1</span> Pending sections</h3>
<div class="outline-text-3" id="text-2-1">
<p>
There are some features that I like to take on a <i>trial run</i>. These
are marked with the <b>PENDING</b> tag to help me remember and evaluate.
</p>
</div>
</div>
</div>

<div id="outline-container-org518825d" class="outline-2">
<h2 id="org518825d"><span class="section-number-2">3</span> Personal Information</h2>
<div class="outline-text-2" id="text-3">
<p>
The full name is used for email messages.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> user-full-name <span style="color: #3e999f;">"Benjamin Beckwith"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7ad7f8" class="outline-2">
<h2 id="orgf7ad7f8"><span class="section-number-2">4</span> Local customizations (custom.el)</h2>
<div class="outline-text-2" id="text-4">
<p>
I typically use the customize interface to generate any local
settings such as proxies, paths, fonts, etc. that may vary from
machine to machine.
</p>

<p>
I like to set the custom file explicitly. Mine resides in the
<code>~/.emacs.d/</code> directory. This code block loads it if it exists.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> custom-file <span style="color: #3e999f;">"~/.emacs.d/custom.el"</span>)
(<span style="color: #718c00;">if</span> (file-exists-p custom-file)
    (load-file custom-file))

(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"&lt;f7&gt;"</span>
    (<span style="color: #718c00;">lambda</span> ()
      (<span style="color: #718c00;">interactive</span>
       (find-file custom-file))))
</pre>
</div>

<p>
If the file doesn't exist, <code>Emacs</code> will still use the file if any
changes are made through the <i>custom interface</i>.
</p>

<p>
Sometimes I'll get bad settings or cruft in that file. I now have a
key, <code>&lt;F7&gt;</code>, for easy navigation to wherever the <code>custom-file</code> points.
</p>
</div>
</div>

<div id="outline-container-orged5f7e1" class="outline-2">
<h2 id="orged5f7e1"><span class="section-number-2">5</span> Small Settings</h2>
<div class="outline-text-2" id="text-5">
<p>
The next sections encompass some small settings to make Emacs mine
(and maybe yours).
</p>
</div>

<div id="outline-container-orge15504c" class="outline-3">
<h3 id="orge15504c"><span class="section-number-3">5.1</span> Super keys</h3>
<div class="outline-text-3" id="text-5-1">
<p>
I like to be able to use the command (or super or hyper) keys for
shortcuts. I need to take care to not interfere with the
built-in shortcuts or my bindings will not work.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> mac-pass-command-to-system t
      mac-option-modifier 'super
      mac-right-option-modifier '(function: alt mouse: alt)
      mac-function-modifier 'hyper)
</pre>
</div>
</div>
</div>

<div id="outline-container-org542c653" class="outline-3">
<h3 id="org542c653"><span class="section-number-3">5.2</span> Package archives</h3>
<div class="outline-text-3" id="text-5-2">
<p>
I like to pull from the popular list of package archives.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-archives '(<span style="color: #3e999f;">"stable-melpa"</span> . <span style="color: #3e999f;">"http://stable.melpa.org/packages/"</span>) t)
(add-to-list 'package-archives '(<span style="color: #3e999f;">"org"</span> . <span style="color: #3e999f;">"http://orgmode.org/elpa/"</span>) t)
</pre>
</div>

<p>
I install the proper packages with these repositories. This may
take some time the first time it runs.
</p>

<p>
Org-mode has their own repositories that keep me on the bleeding
edge. They is why that repository is listed separately above.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">unless</span> (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))
(<span style="color: #718c00;">setq</span> use-package-verbose t)
(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">use-package</span>)
</pre>
</div>
</div>

<div id="outline-container-org6a781f0" class="outline-4">
<h4 id="org6a781f0"><span class="section-number-4">5.2.1</span> From Source</h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
<a href="https://github.com/quelpa/quelpa">Quelpa</a> grabs and builds packages from source (e.g. Github). I have
found a few things not in any package archive yet that I'd like to
have automatically installed.
</p>

<p>
Along with the <code>quelpa</code> package, <code>quelpa-use-package</code> adds a
handler to <code>use-package</code> making it fit in nicely with the rest of
my configuration.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">quelpa</span> <span style="color: #8959a8;">:ensure</span> t)
(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">quelpa-use-package</span> <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1844685" class="outline-3">
<h3 id="org1844685"><span class="section-number-3">5.3</span> Binding Keys</h3>
<div class="outline-text-3" id="text-5-3">
<p>
For binding keys, I use the <code>bind-key</code> package. Not only does it
easily bind keys, but it does so with some nice features.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">bind-key</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"C-h B"</span> . describe-personal-keybindings))
</pre>
</div>

<p>
By using <code>bind-key</code>, you can specify the keystrokes that invoke a
command. This is regular behavior that you can already achieve in
Emacs and will result in a global binding.
</p>

<p>
If you also want to override any possible minor-mode bindings of
the same keys, you can use <code>bind-key*</code> instead.
</p>

<p>
There is also an <code>unbind-key</code> to, of course, remove any binding.
</p>

<p>
The real kicker is that it will keep track of these bindings and
let you see a summary of your customizations with
</p>

<pre class="example">
M-x describe-personal-keybindings
</pre>

<p>
This is bound to <code>C-h B</code> above.
</p>
</div>
</div>

<div id="outline-container-org94c43ec" class="outline-3">
<h3 id="org94c43ec"><span class="section-number-3">5.4</span> Hydra</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Sometimes it is useful to go into a <i>command mode</i> that lets you
quickly do a few different actions. Hydra does that and more.
</p>

<p>
By defining specific <i>hydras</i>, you can group together commands with
documentation. Think of it as a mini-control-panel.  I include it here and
use it elsewhere when grouping commands. (See <a href="#org357bf40">5.5.1</a> for an example)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">hydra</span>
  <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1edf94b" class="outline-3">
<h3 id="org1edf94b"><span class="section-number-3">5.5</span> Personal Keymaps</h3>
<div class="outline-text-3" id="text-5-5">
<p>
These are inspired from
<a href="http://endlessparentheses.com/the-toggle-map-and-wizardry.html">http://endlessparentheses.com/the-toggle-map-and-wizardry.html</a>.
</p>
</div>

<div id="outline-container-org357bf40" class="outline-4">
<h4 id="org357bf40"><span class="section-number-4">5.5.1</span> Toggle Map</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
This toggle map shows the current <i>toggleable</i> settings with
shortcut keys for enabling. The amaranth color makes this buffer
stay around until I press <code>q</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defmacro</span> <span style="color: #f5871f;">toggle-setting-string</span> (setting)
  `(<span style="color: #718c00;">if</span> (<span style="color: #718c00;">and</span> (boundp ',setting) ,setting) '[x] '[_]))

(<span style="color: #718c00;">bind-key</span>
 <span style="color: #3e999f;">"C-x t"</span>
 (<span style="color: #718c00;">defhydra</span> hydra-toggle (<span style="color: #8959a8;">:color</span> amaranth)
   <span style="color: #3e999f;">"</span>
<span style="color: #3e999f;">_c_ column-number : %(toggle-setting-string column-number-mode)  _b_ orgtbl-mode    : %(toggle-setting-string orgtbl-mode)  _x_/_X_ trans          : %(identity bnb/transparency)</span>
<span style="color: #3e999f;">_e_ debug-on-error: %(toggle-setting-string debug-on-error)  _s_ orgstruct-mode : %(toggle-setting-string orgstruct-mode)  _m_   hide mode-line : %(toggle-setting-string bnb/hide-mode-line-mode)  </span>
<span style="color: #3e999f;">_u_ debug-on-quit : %(toggle-setting-string debug-on-quit)  _h_ diff-hl-mode   : %(toggle-setting-string diff-hl-mode)</span>
<span style="color: #3e999f;">_f_ auto-fill     : %(toggle-setting-string auto-fill-function)  _B_ battery-mode   : %(toggle-setting-string display-battery-mode)</span>
<span style="color: #3e999f;">_t_ truncate-lines: %(toggle-setting-string truncate-lines)  _l_ highlight-line : %(toggle-setting-string hl-line-mode)</span>
<span style="color: #3e999f;">_r_ read-only     : %(toggle-setting-string buffer-read-only)  _n_ line-numbers   : %(toggle-setting-string linum-mode)</span>
<span style="color: #3e999f;">_w_ whitespace    : %(toggle-setting-string whitespace-mode)  _N_ relative lines : %(if (eq linum-format 'linum-relative) '[x] '[_])</span>
<span style="color: #3e999f;">"</span>
   (<span style="color: #3e999f;">"c"</span> column-number-mode nil)
   (<span style="color: #3e999f;">"e"</span> toggle-debug-on-error nil)
   (<span style="color: #3e999f;">"u"</span> toggle-debug-on-quit nil)
   (<span style="color: #3e999f;">"f"</span> auto-fill-mode nil)
   (<span style="color: #3e999f;">"t"</span> toggle-truncate-lines nil)
   (<span style="color: #3e999f;">"r"</span> dired-toggle-read-only nil)
   (<span style="color: #3e999f;">"w"</span> whitespace-mode nil)
   (<span style="color: #3e999f;">"b"</span> orgtbl-mode nil)
   (<span style="color: #3e999f;">"s"</span> orgstruct-mode nil)
   (<span style="color: #3e999f;">"x"</span> bnb/transparency-next nil)
   (<span style="color: #3e999f;">"B"</span> display-battery-mode nil)
   (<span style="color: #3e999f;">"X"</span> bnb/transparency-previous nil)
   (<span style="color: #3e999f;">"h"</span> diff-hl-mode nil)
   (<span style="color: #3e999f;">"l"</span> hl-line-mode nil)
   (<span style="color: #3e999f;">"n"</span> linum-mode nil)
   (<span style="color: #3e999f;">"N"</span> linum-relative-toggle nil)
   (<span style="color: #3e999f;">"m"</span> bnb/hide-mode-line-mode nil)
   (<span style="color: #3e999f;">"q"</span> nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga73a7c7" class="outline-4">
<h4 id="orga73a7c7"><span class="section-number-4">5.5.2</span> Elisp Maps</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
Here are some nice-to-have features when in <i>elisp-mode</i>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span>
 <span style="color: #3e999f;">"C-c e"</span>
 (<span style="color: #718c00;">defhydra</span> hydra-elisp-cmds (<span style="color: #8959a8;">:color</span> blue)
   (<span style="color: #3e999f;">"b"</span> eval-buffer <span style="color: #3e999f;">"eval buffer"</span>)
   (<span style="color: #3e999f;">"e"</span> toggle-debug-on-error <span style="color: #3e999f;">"debug-on-error"</span>)
   (<span style="color: #3e999f;">"f"</span> emacs-lisp-byte-compile-and-load <span style="color: #3e999f;">"byte-compile-and-load"</span>)
   (<span style="color: #3e999f;">"r"</span> eval-region <span style="color: #3e999f;">"eval-region"</span>)
   (<span style="color: #3e999f;">"q"</span> nil))
 emacs-lisp-mode-map)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span>
 <span style="color: #3e999f;">"C-h e"</span>
 (<span style="color: #718c00;">defhydra</span> hydra-elisp-help (<span style="color: #8959a8;">:color</span> blue)
   (<span style="color: #3e999f;">"e"</span> view-echo-area-messages <span style="color: #3e999f;">"view-echod-area-messages"</span>)
   (<span style="color: #3e999f;">"f"</span> find-function <span style="color: #3e999f;">"find-function"</span>)
   (<span style="color: #3e999f;">"k"</span> find-function-on-key <span style="color: #3e999f;">"find-function-on-key"</span>)
   (<span style="color: #3e999f;">"l"</span> find-library <span style="color: #3e999f;">"find-library"</span>)
   (<span style="color: #3e999f;">"v"</span> find-variable <span style="color: #3e999f;">"find-variable"</span>)
   (<span style="color: #3e999f;">"V"</span> apropos-value <span style="color: #3e999f;">"apropos-value"</span>)
   (<span style="color: #3e999f;">"i"</span> info-display-manual <span style="color: #3e999f;">"info-display-manual"</span>)
   (<span style="color: #3e999f;">"q"</span> nil))
 emacs-lisp-mode-map)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3becd5" class="outline-4">
<h4 id="orga3becd5"><span class="section-number-4">5.5.3</span> Small bindings</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
This sections contains smaller bindings (or overrides) that I use
to customize functionality.
</p>
</div>

<ol class="org-ol"><li><a id="orgc037785"></a>Whitespace deletion<br /><div class="outline-text-5" id="text-5-5-3-1">
<p>
By default, <code>M-\</code> performs <code>delete-horizontal-space</code> and will
consume all of the whitespace present.
</p>

<p>
I'd like it to be smart and leave one or no spaces if
possible. The <code>fixup-whitespace</code> function will do that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"M-\\"</span> 'fixup-whitespace)
</pre>
</div>
</div></li>

<li><a id="org38edc55"></a>Scroll window up/down<br /><div class="outline-text-5" id="text-5-5-3-2">
<p>
In addition to moving the cursor, it is also interesting to
scroll the screen (without moving the cursor with respect to the
frame).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/scroll-up-1</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (cua-scroll-up 1))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/scroll-down-1</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (cua-scroll-down 1))

(<span style="color: #718c00;">bind-keys</span>
 (<span style="color: #3e999f;">"M-n"</span> . bnb/scroll-up-1)
 (<span style="color: #3e999f;">"M-p"</span> . bnb/scroll-down-1))
</pre>
</div>
</div></li></ol>
</div>

<div id="outline-container-org5c995cf" class="outline-4">
<h4 id="org5c995cf"><span class="section-number-4">5.5.4</span> Kill current buffer</h4>
<div class="outline-text-4" id="text-5-5-4">
<p>
Another great tip from <a href="http://pragmaticemacs.com/emacs/dont-kill-buffer-kill-this-buffer-instead/">Pragmatic Emacs</a>, use <code>kill-this-buffer</code> to
kill the current buffer instead of asking which one.  I'm not
overriding the <code>C-x k</code> default, but added a <code>C-x C-k</code> alternative.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-keys</span>
 (<span style="color: #3e999f;">"C-x C-k"</span> . kill-this-buffer))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org89b9247" class="outline-3">
<h3 id="org89b9247"><span class="section-number-3">5.6</span> Minibuffer History Save</h3>
<div class="outline-text-3" id="text-5-6">
<p>
This saves the minibuffer histories to preserve across emacs
sessions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> savehist-additional-variables
      '(search-ring regexp-search-ring)
      savehist-file <span style="color: #3e999f;">"~/.emacs.d/savehist"</span>)
(savehist-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d17157" class="outline-3">
<h3 id="org4d17157"><span class="section-number-3">5.7</span> Abbrev</h3>
<div class="outline-text-3" id="text-5-7">
<p>
The following block is courtesy of <a href="http://endlessparentheses.com/ispell-and-abbrev-the-perfect-auto-correct.html">Endless Parentheses</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"C-x C-i"</span> 'bnb/ispell-word-then-abbrev)

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/ispell-word-then-abbrev</span> (p)
  <span style="color: #8959a8;">"Call `</span><span style="color: #4271ae;">ispell-word</span><span style="color: #8959a8;">'. Then create an abbrev for the correction</span>
<span style="color: #8959a8;">made. With prefix P, create local abbrev. Otherwise, it will be</span>
<span style="color: #8959a8;">global."</span>
  (<span style="color: #718c00;">interactive</span> <span style="color: #3e999f;">"P"</span>)
  (<span style="color: #718c00;">let</span> ((bef (downcase (<span style="color: #718c00;">or</span> (thing-at-point 'word) <span style="color: #3e999f;">""</span>))) aft)
    (call-interactively 'ispell-word)
    (<span style="color: #718c00;">setq</span> aft (downcase (<span style="color: #718c00;">or</span> (thing-at-point 'word) <span style="color: #3e999f;">""</span>)))
    (<span style="color: #718c00;">unless</span> (string= aft bef)
      (message <span style="color: #3e999f;">"\"%s\" now expands to \"%s\" %sally"</span>
               bef aft (<span style="color: #718c00;">if</span> p <span style="color: #3e999f;">"loc"</span> <span style="color: #3e999f;">"glob"</span>))
      (define-abbrev
        (<span style="color: #718c00;">if</span> p global-abbrev-table local-abbrev-table)
        bef aft))))

(<span style="color: #718c00;">setq</span> save-abbrevs t)
(<span style="color: #718c00;">setq-default</span> abbrev-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga7793b9" class="outline-3">
<h3 id="orga7793b9"><span class="section-number-3">5.8</span> Hippie Expand</h3>
<div class="outline-text-3" id="text-5-8">
<p>
Try to expand the text before point in an intelligent way. Repeat
the keypress to cycle through options.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"M-/"</span> 'hippie-expand)
</pre>
</div>
</div>
</div>

<div id="outline-container-org29ec861" class="outline-3">
<h3 id="org29ec861"><span class="section-number-3">5.9</span> Emacs Bookmarks</h3>
<div class="outline-text-3" id="text-5-9">
<p>
<a href="http://emacswiki.org/emacs/BookMarks">http://emacswiki.org/emacs/BookMarks</a>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keystroke</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-x r m</code></td>
<td class="org-left">Set a bookmark</td>
</tr>

<tr>
<td class="org-left"><code>C-x r b</code></td>
<td class="org-left">Jump to a bookmark</td>
</tr>

<tr>
<td class="org-left"><code>C-x r l</code></td>
<td class="org-left">List your bookmarks</td>
</tr>

<tr>
<td class="org-left"><code>M-x bookmark-delete</code></td>
<td class="org-left">Delete bookmark by name</td>
</tr>
</tbody>
</table>

<p>
I will auto-save my bookmarks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> bookmark-save-flag t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0997fa3" class="outline-3">
<h3 id="org0997fa3"><span class="section-number-3">5.10</span> Writegood Mode</h3>
<div class="outline-text-3" id="text-5-10">
<p>
This mode installs through the ELPA system.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">writegood-mode</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"C-c g"</span>     . writegood-mode)
  (<span style="color: #3e999f;">"C-c C-g g"</span> . writegood-grade-level)
  (<span style="color: #3e999f;">"C-c C-g e"</span> . writegood-reading-ease))
</pre>
</div>
</div>
</div>

<div id="outline-container-org97cd44c" class="outline-3">
<h3 id="org97cd44c"><span class="section-number-3">5.11</span> Spell Checking</h3>
<div class="outline-text-3" id="text-5-11">
<p>
<a href="http://blog.binchen.org/posts/what-s-the-best-spell-check-set-up-in-emacs.html">This site</a> has an interesting suggestion on how to use <code>aspell</code> for
CamelCase spell checking.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">cond</span>
 ((executable-find <span style="color: #3e999f;">"aspell"</span>)
  (<span style="color: #718c00;">setq</span> ispell-program-name (executable-find <span style="color: #3e999f;">"aspell"</span>)
        ispell-extra-args '(<span style="color: #3e999f;">"--sug-mode=ultra"</span> <span style="color: #3e999f;">"--lang=en_US"</span>)))
 (t (<span style="color: #718c00;">setq</span> ispell-program-name nil)
    (message <span style="color: #3e999f;">"No aspell found!"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a2dc00" class="outline-3">
<h3 id="org5a2dc00"><span class="section-number-3">5.12</span> Development</h3>
<div class="outline-text-3" id="text-5-12">
<p>
For any lisp development, the following is nice to have.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(show-paren-mode t)
</pre>
</div>

<p>
While developing, documentation is nice to have handy and
automatic.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'cperl-mode-hook 'turn-on-eldoc-mode)
(add-hook 'eshell-mode-hook 'turn-on-eldoc-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbbfbdd4" class="outline-3">
<h3 id="orgbbfbdd4"><span class="section-number-3">5.13</span> Encryption</h3>
<div class="outline-text-3" id="text-5-13">
<p>
<a href="http://www.gnu.org/software/emacs/manual/html_mono/epa.html#Top">EasyPG Assistant</a> helps with integration of GnuPG.  The command
below turns on the automatic encryption/decryption of <code>*.gpg</code>
files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">epa</span>
  <span style="color: #8959a8;">:disabled</span> t
  <span style="color: #8959a8;">:config</span> (epa-file-enable))
</pre>
</div>

<p>
It is possible that you would need to <a href="(customize-group%20'epg)">customize the location of
gpg</a>.
</p>
</div>
</div>

<div id="outline-container-org5ae932f" class="outline-3">
<h3 id="org5ae932f"><span class="section-number-3">5.14</span> Read-only helpers</h3>
<div class="outline-text-3" id="text-5-14">
<p>
For read-only files, look at them in <code>view-mode</code> which will enable
vi-style navigation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">view</span>
  <span style="color: #8959a8;">:init</span> (<span style="color: #718c00;">setq</span> view-read-only t)
  <span style="color: #8959a8;">:config</span> (<span style="color: #718c00;">bind-keys</span> <span style="color: #8959a8;">:map</span> view-mode-map
                     (<span style="color: #3e999f;">"n"</span> . next-line    )
                     (<span style="color: #3e999f;">"p"</span> . previous-line)
                     (<span style="color: #3e999f;">"j"</span> . next-line    )
                     (<span style="color: #3e999f;">"k"</span> . previous-line)
                     (<span style="color: #3e999f;">"l"</span> . forward-char)
                     (<span style="color: #3e999f;">"h"</span> . (<span style="color: #718c00;">lambda</span> () (<span style="color: #718c00;">interactive</span>) (forward-char -1)))
                     (<span style="color: #3e999f;">"q"</span> . (<span style="color: #718c00;">lambda</span> () (<span style="color: #718c00;">interactive</span>) (view-mode -1)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeaaaeec" class="outline-3">
<h3 id="orgeaaaeec"><span class="section-number-3">5.15</span> Default File encoding</h3>
<div class="outline-text-3" id="text-5-15">
<p>
I like to have the files be <code>utf-8</code> by default. Do
let me know if I shouldn't do this, will you?
</p>

<p>
Set <code>utf-8</code> for all coding systems except for the clipboard on
windows.  That one gets <code>utf-16le</code> to be compatible.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(prefer-coding-system       'utf-8)
(set-default-coding-systems 'utf-8)
(set-terminal-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
(set-language-environment 'utf-8)
(<span style="color: #718c00;">setq</span> default-buffer-file-coding-system 'utf-8)
(<span style="color: #718c00;">setq</span> x-select-request-type '(UTF8_STRING COMPOUND_TEXT TEXT STRING))
<span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">MS Windows clipboard is UTF-16LE</span>
(<span style="color: #718c00;">when</span> (eq system-type 'windows-nt)
  (set-clipboard-coding-system 'utf-16le-dos))
</pre>
</div>
</div>
</div>

<div id="outline-container-org20453da" class="outline-3">
<h3 id="org20453da"><span class="section-number-3">5.16</span> Vimrc generic mode</h3>
<div class="outline-text-3" id="text-5-16">
<p>
Good to have to help with my pentadactyl configuration as it is in
a vim-style of configuration.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">define-generic-mode</span> '<span style="color: #f5871f;">vimrc-generic-mode</span>
  '()
  '()
  '((<span style="color: #3e999f;">"^[\t ]*:?</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">!</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">|</span><span style="color: #3e999f;">ab</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">|</span><span style="color: #3e999f;">map</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">|</span><span style="color: #3e999f;">unmap</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">[</span><span style="color: #4271ae;">^</span><span style="color: #3e999f;">\r\n\"]*\"[</span><span style="color: #4271ae;">^</span><span style="color: #3e999f;">\r\n\"]*</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">\"[</span><span style="color: #4271ae;">^</span><span style="color: #3e999f;">\r\n\"]*\"[</span><span style="color: #4271ae;">^</span><span style="color: #3e999f;">\r\n\"]*</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">*$"</span>
     (0 font-lock-warning-face))
    (<span style="color: #3e999f;">"</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">^</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">|</span><span style="color: #3e999f;">[\t ]</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">\".*</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">$"</span>
     (2 font-lock-comment-face))
    (<span style="color: #3e999f;">"\"</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">[</span><span style="color: #4271ae;">^</span><span style="color: #3e999f;">\n\r\"\\]</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">|</span><span style="color: #3e999f;">\\.</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">*\""</span>
     (0 font-lock-string-face)))
  '(<span style="color: #3e999f;">"/vimrc\\'"</span> <span style="color: #3e999f;">"\\.vim</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">rc</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">?\\'"</span>)
  '((<span style="color: #718c00;">lambda</span> ()
      (modify-syntax-entry ?\" <span style="color: #3e999f;">"."</span>)))
  <span style="color: #8959a8;">"Generic mode for Vim configuration files."</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d84130" class="outline-3">
<h3 id="org9d84130"><span class="section-number-3">5.17</span> Ediff single frame</h3>
<div class="outline-text-3" id="text-5-17">
<p>
I really dislike the multi-frame mode of <code>ediff</code>.  It is confusing
to use and really messes up my <a href="http://dwm.suckless.org">dwm</a> usage. By explicitly setting
the following setting, it forces <code>ediff</code> to use only one
frame.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)
</pre>
</div>

<p>
Now the control window will be a small window instead of a
separate frame.
</p>
</div>
</div>

<div id="outline-container-org9d1a59f" class="outline-3">
<h3 id="org9d1a59f"><span class="section-number-3">5.18</span> Git</h3>
<div class="outline-text-3" id="text-5-18">
</div><div id="outline-container-orga2f4193" class="outline-4">
<h4 id="orga2f4193"><span class="section-number-4">5.18.1</span> Magit</h4>
<div class="outline-text-4" id="text-5-18-1">
<p>
<a href="magit.html#Top">Magit</a> is a git interface for Emacs.
</p>

<p>
Here I set a global key for <code>magit-status</code>. Think 'G' looks
like 6.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">magit</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"&lt;f6&gt;"</span> . magit-status)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> magit-last-seen-setup-instructions <span style="color: #3e999f;">"1.4.0"</span>))
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="orgc7ec183"></a>Release 1.4.0<br /><div class="outline-text-5" id="text-5-18-1-1">
<p>
This magit release warns about auto-revert of buffers.  This is
turned on by default and I will keep that setting.  To turn off
the magit warning, I set <code>magit-last-seen-setup-instructions</code> to
1.4.0 as shown above.
</p>
</div></li></ol>
</div>

<div id="outline-container-orgb7b662a" class="outline-4">
<h4 id="orgb7b662a"><span class="section-number-4">5.18.2</span> Git timemachine&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h4>
<div class="outline-text-4" id="text-5-18-2">
<p>
Loop through the history of a file with some simple keystrokes (or wheeling up and down)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">git-timemachine</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"C-x C-g"</span> . git-timemachine-toggle)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">bind-keys</span>
   <span style="color: #8959a8;">:map</span> git-timemachine-mode-map
   (<span style="color: #3e999f;">"&lt;M-up&gt;"</span> . git-timemachine-show-previous-revision)
   (<span style="color: #3e999f;">"&lt;M-down&gt;"</span> . git-timemachine-show-next-revision)
   (<span style="color: #3e999f;">"&lt;S-wheel-up&gt;"</span> . git-timemachine-show-previous-revision)
   (<span style="color: #3e999f;">"&lt;S-wheel-down&gt;"</span> . git-timemachine-show-next-revision)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfe8091b" class="outline-3">
<h3 id="orgfe8091b"><span class="section-number-3">5.19</span> Open/Edit This file</h3>
<div class="outline-text-3" id="text-5-19">
<p>
When I hit <code>&lt;F5&gt;</code>, open this file for editing.  That way, any
time I have something I need to remember for my emacs setting, it
is just a button-push away.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"&lt;f5&gt;"</span>
          (<span style="color: #718c00;">lambda</span> ()
            (<span style="color: #718c00;">interactive</span>)
            (find-file <span style="color: #3e999f;">"~/.emacs.d/bnb-emacs/Readme.org"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ec4d57" class="outline-3">
<h3 id="org9ec4d57"><span class="section-number-3">5.20</span> Sounds</h3>
<div class="outline-text-3" id="text-5-20">
<p>
I dislike the bell ringing when I hit <code>C-g</code>. To silence the bell,
just set the <code>ring-bell-function</code> to <code>nil</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> visual-bell nil
      ring-bell-function `(<span style="color: #718c00;">lambda</span> () nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e9748d" class="outline-3">
<h3 id="org2e9748d"><span class="section-number-3">5.21</span> Midnight Mode</h3>
<div class="outline-text-3" id="text-5-21">
<p>
This mode looks at midnight and kills any inactive buffers. By
default, <i>inactive</i> means is any buffer untouched for three days.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">midnight</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org70c6b8c" class="outline-3">
<h3 id="org70c6b8c"><span class="section-number-3">5.22</span> Which Key</h3>
<div class="outline-text-3" id="text-5-22">
<p>
This <a href="https://github.com/justbur/emacs-which-key">helpful little package</a> makes it easy to remember emacs
prefixed commands.  Start typing a prefix such as <code>C-x</code> after a
brief delay, the options for any following commands are shown.
</p>

<p>
I am using a setup that tries the right side of emacs first, and
punts to a bottom window if there is not enough room.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">which-key</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:init</span>
  (which-key-mode)
  (which-key-setup-side-window-right-bottom))
</pre>
</div>
</div>
</div>

<div id="outline-container-org20f328f" class="outline-3">
<h3 id="org20f328f"><span class="section-number-3">5.23</span> Ace Utilities</h3>
<div class="outline-text-3" id="text-5-23">
</div><div id="outline-container-org24ddb47" class="outline-4">
<h4 id="org24ddb47"><span class="section-number-4">5.23.1</span> Ace Window</h4>
<div class="outline-text-4" id="text-5-23-1">
<p>
Instead of <code>C-x o</code> traversal, <code>ace-window</code> mode provides numbers
for quick window access
</p>

<p>
Set the keys to something other than the default numbers. Note
that this also limits the number of windows that can be used, but
given my usage, I doubt it goes up to 'j' often.
</p>

<p>
Also, I modify the face attribute to make the window numbers large.
</p>

<p>
After reading <a href="https://github.com/abo-abo/ace-window/wiki">the wiki</a>, I supercharged the interface for <code>ace-window</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ace-window</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"H-a"</span>    . ace-window)
  (<span style="color: #3e999f;">"&lt;f9&gt; a"</span> . ace-window)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> aw-keys '(?j ?k ?l ?\; ?n ?m)
        aw-leading-char-style 'path
        aw-dispatch-always t
        aw-dispatch-alist
        '((?x aw-delete-window <span style="color: #3e999f;">"Ace - Delete Window"</span>)
          (?c aw-swap-window   <span style="color: #3e999f;">"Ace - Swap window"</span>)
          (?n aw-flip-window   <span style="color: #3e999f;">"Ace - Flip window"</span>)
          (?v aw-split-window-vert <span style="color: #3e999f;">"Ace - Split Vert Window"</span>)
          (?h aw-split-window-horz <span style="color: #3e999f;">"Ace - Split Horz Window"</span>)
          (?m delete-other-windows <span style="color: #3e999f;">"Ace - Maximize Window"</span>)
          (?b balance-windows)))

  (<span style="color: #718c00;">defhydra</span> hydra-window-size (<span style="color: #8959a8;">:color</span> amaranth)
    <span style="color: #3e999f;">"Window size"</span>
    (<span style="color: #3e999f;">"h"</span> shrink-window-horizontally <span style="color: #3e999f;">"shrink horizontal"</span>)
    (<span style="color: #3e999f;">"j"</span> shrink-window <span style="color: #3e999f;">"shrink vertical"</span>)
    (<span style="color: #3e999f;">"k"</span> enlarge-window <span style="color: #3e999f;">"enlarge vertical"</span>)
    (<span style="color: #3e999f;">"l"</span> enlarge-window-horizontally <span style="color: #3e999f;">"enlarge horizontal"</span>)
    (<span style="color: #3e999f;">"q"</span> nil <span style="color: #3e999f;">"quit"</span>))
  (add-to-list 'aw-dispatch-alist '(?w hydra-window-size/body) t)

  (<span style="color: #718c00;">defhydra</span> hydra-window-frame (<span style="color: #8959a8;">:color</span> red)
    <span style="color: #3e999f;">"Frame"</span>
    (<span style="color: #3e999f;">"f"</span> make-frame <span style="color: #3e999f;">"new frame"</span>)
    (<span style="color: #3e999f;">"x"</span> delete-frame <span style="color: #3e999f;">"delete frame"</span>)
    (<span style="color: #3e999f;">"q"</span> nil <span style="color: #3e999f;">"quit"</span>))
  (add-to-list 'aw-dispatch-alist '(?\; hydra-window-frame/body) t)

  (<span style="color: #718c00;">defhydra</span> hydra-window-scroll (<span style="color: #8959a8;">:color</span> amaranth)
    <span style="color: #3e999f;">"Scroll other window"</span>
    (<span style="color: #3e999f;">"n"</span> scroll-other-window <span style="color: #3e999f;">"scroll"</span>)
    (<span style="color: #3e999f;">"p"</span> scroll-other-window-down <span style="color: #3e999f;">"scroll down"</span>)
    (<span style="color: #3e999f;">"q"</span> nil <span style="color: #3e999f;">"quit"</span>))
  (add-to-list 'aw-dispatch-alist '(?o hydra-window-scroll/body) t)

  (set-face-attribute 'aw-leading-char-face nil <span style="color: #8959a8;">:height</span> 2.0))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f76372" class="outline-4">
<h4 id="org0f76372"><span class="section-number-4">5.23.2</span> Avy Goto</h4>
<div class="outline-text-4" id="text-5-23-2">
<p>
It is time to make some shortcuts for jumping to see if they make
sense for me.  The interesting feature that I can use is that
these highlight text an all shown buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">avy</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"H-SPC"</span> . avy-goto-char-timer)
  (<span style="color: #3e999f;">"&lt;f9&gt; SPC"</span> . avy-goto-char-timer)
  (<span style="color: #3e999f;">"C-c g"</span> . avy-goto-word-1)
  (<span style="color: #3e999f;">"M-g l"</span> . avy-goto-line)
  (<span style="color: #3e999f;">"M-g c"</span> . avy-goto-char-2)
  (<span style="color: #3e999f;">"M-g w"</span> . avy-goto-word-0))
</pre>
</div>

<p>
The commands begin with the normal prefix of <code>M-g</code> for the goto
commands and use l,c and w for lines, characters and words
respectively.
</p>

<p>
The char version I use here is the two-element version.  For
single character jumping, I have the Ace Isearch mode below that
will facilitate quick jumping.
</p>
</div>
</div>
</div>

<div id="outline-container-org85b9683" class="outline-3">
<h3 id="org85b9683"><span class="section-number-3">5.24</span> Edit Server</h3>
<div class="outline-text-3" id="text-5-24">
<p>
The edit server talks to Chrome and uses emacs to edit any
text areas.  I start this server here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">edit-server</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:init</span>
  (edit-server-start))
</pre>
</div>

<p>
Chrome needs to have the proper extension installed there too for
the installation to be complete.
</p>
</div>
</div>

<div id="outline-container-org804540b" class="outline-3">
<h3 id="org804540b"><span class="section-number-3">5.25</span> Regexp-Builder</h3>
<div class="outline-text-3" id="text-5-25">
<p>
Emacs regular expressions are not the easiest to use out of the
box. Emacs now has <a href="re-builder">regexp-builder</a> to assist you in building the
correct regexp as you type.
</p>

<p>
However, to complicate matters, there are five different <i>syntaxes</i>
of regular expression that the builder can use.  The <code>string</code>
syntax is what I tend to use most in searching and replacing, so I
will make that my default.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> reb-re-syntax 'string)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key Binding</th>
<th scope="col" class="org-left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-c TAB</code></td>
<td class="org-left">Switch syntax</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-e</code></td>
<td class="org-left">Sub-expression mode (show matching groups)</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-s/r</code></td>
<td class="org-left">Search forward/backward</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-w</code></td>
<td class="org-left">Copy regexp to kill ring</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-q</code></td>
<td class="org-left">Quit the builder</td>
</tr>
</tbody>
</table>

<p>
Be sure to consult the <a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Regexps">syntax of regular expressions</a> to learn more
about the weird backslashing.
</p>
</div>
</div>

<div id="outline-container-orgf8ab752" class="outline-3">
<h3 id="orgf8ab752"><span class="section-number-3">5.26</span> IBuffer</h3>
<div class="outline-text-3" id="text-5-26">
<p>
Use <code>ibuffer</code> instead of <code>list-buffers</code> for buffer management. The
most visible difference being the coloring that <code>ibuffer</code> uses.
</p>

<p>
I also squash any empty groups from being displayed and add hooks
to automatically set the filter groups and update contents.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"C-x C-b"</span> 'ibuffer)

(<span style="color: #718c00;">setq</span> ibuffer-show-empty-filter-groups nil)

(add-hook 'ibuffer-mode-hook
          '(lambda ()
             (ibuffer-auto-mode 1)
             (ibuffer-switch-to-saved-filter-groups <span style="color: #3e999f;">"Standard"</span>)))
</pre>
</div>
</div>

<div id="outline-container-orgba0d06a" class="outline-4">
<h4 id="orgba0d06a"><span class="section-number-4">5.26.1</span> Groups</h4>
<div class="outline-text-4" id="text-5-26-1">
<p>
The buffer list splits into arbitrary groups for easier
management. Below I create an "Org" group for <code>org-mode</code> buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> ibuffer-saved-filter-groups
      '((<span style="color: #3e999f;">"Standard"</span>
         (<span style="color: #3e999f;">"Emacs"</span> (<span style="color: #718c00;">or</span> (filename . <span style="color: #3e999f;">".*bnb-emacs.*"</span>)
                      (mode . emacs-lisp-mode)))
         (<span style="color: #3e999f;">"Org"</span> (mode . org-mode))
         (<span style="color: #3e999f;">"Magit"</span> (name . <span style="color: #3e999f;">"\*magit"</span>))
         (<span style="color: #3e999f;">"Mail"</span> (<span style="color: #718c00;">or</span> (mode . message-mode)
                     (mode . mail-mode)))
         (<span style="color: #3e999f;">"HTML"</span> (mode . html-mode))
         (<span style="color: #3e999f;">"Help"</span> (<span style="color: #718c00;">or</span> (name . <span style="color: #3e999f;">"\*Help\*"</span>)
                     (name . <span style="color: #3e999f;">"\*Apropos\*"</span>)
                     (name . <span style="color: #3e999f;">"\*info\*"</span>))))))
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="org7f59b19"></a>VC Grouping<br /><div class="outline-text-5" id="text-5-26-1-1">
<p>
The <code>ibuffer-vc</code> package provides groups according to version
control sets. Here I setup a small keybinding to get to the
filtered vc groups.  The keys <code>/ R</code> will go back to the standard
view.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ibuffer-vc</span> <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:config</span> (<span style="color: #718c00;">bind-keys</span>
           <span style="color: #8959a8;">:map</span> ibuffer-mode-map
           (<span style="color: #3e999f;">"/ v"</span> . ibuffer-vc-set-filter-groups-by-vc-root)))
</pre>
</div>
</div></li></ol>
</div>
</div>

<div id="outline-container-org769c777" class="outline-3">
<h3 id="org769c777"><span class="section-number-3">5.27</span> Multiple Cursors</h3>
<div class="outline-text-3" id="text-5-27">
<p>
This interface is a mix of an example on the <a href="https://github.com/abo-abo/hydra/wiki/multiple-cursors">hydra wiki</a> and my own
additions.
</p>

<p>
I think that the key thing is remembering to not have this affect
<b>all</b> cursors when prompted. Otherwise, it seems, the cursors are
duplicated in strange ways.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">multiple-cursors</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"H-m"</span>   . hydra-mc/body)
  (<span style="color: #3e999f;">"C-x m"</span> . hydra-mc/body)
  (<span style="color: #3e999f;">"s-&lt;mouse-1&gt;"</span> . mc/add-cursor-on-click)
  (<span style="color: #3e999f;">"C-x M"</span> . compose-mail)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">defhydra</span> hydra-mc (<span style="color: #8959a8;">:hint</span> nil)
   <span style="color: #3e999f;">"</span>
<span style="color: #3e999f;">     ^Up^            ^Down^        ^Miscellaneous^</span>
<span style="color: #3e999f;">-----------------------------------------------------------</span>
<span style="color: #3e999f;">[_p_]   Next    [_n_]   Next    [_l_] Edit lines  [_x_] Arrows</span>
<span style="color: #3e999f;">[_P_]   Skip    [_N_]   Skip    [_a_] Mark all    [_g_] Regexp</span>
<span style="color: #3e999f;">[_M-p_] Unmark  [_M-n_] Unmark  [_q_] Quit"</span>
  (<span style="color: #3e999f;">"l"</span>   mc/edit-lines <span style="color: #8959a8;">:exit</span> t)
  (<span style="color: #3e999f;">"a"</span>   mc/mark-all-like-this-dwim <span style="color: #8959a8;">:exit</span> t)
  (<span style="color: #3e999f;">"n"</span>   mc/mark-next-like-this)
  (<span style="color: #3e999f;">"N"</span>   mc/skip-to-next-like-this)
  (<span style="color: #3e999f;">"M-n"</span> mc/unmark-next-like-this)
  (<span style="color: #3e999f;">"p"</span>   mc/mark-previous-like-this)
  (<span style="color: #3e999f;">"P"</span>   mc/skip-to-previous-like-this)
  (<span style="color: #3e999f;">"M-p"</span> mc/unmark-previous-like-this)
  (<span style="color: #3e999f;">"g"</span>   mc/mark-all-in-region-regexp <span style="color: #8959a8;">:exit</span> t)
  (<span style="color: #3e999f;">"r"</span>   mc/mark-sgml-tag-pair <span style="color: #8959a8;">:exit</span> t)
  (<span style="color: #3e999f;">"x"</span>   mc/mark-more-like-this-extended)
  (<span style="color: #3e999f;">"q"</span>   nil))
(add-hydra-mc-funcs))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">add-hydra-mc-funcs</span> ()
  <span style="color: #8959a8;">"Add my hydra-mc funcs to the proper whitelist"</span>
  (<span style="color: #718c00;">let*</span> ((hydra-mc-funcs
          (cl-remove-if-not
           'functionp
           (apply #'append hydra-mc/heads)))
         (mc-funcs-to-ignore (cl-intersection
                              hydra-mc-funcs
                              mc--default-cmds-to-run-once))
         (funcs-to-whitelist
          (cl-mapcar
           (<span style="color: #718c00;">lambda</span> (x) (intern (concat <span style="color: #3e999f;">"hydra-mc/"</span> (symbol-name x))))
           mc-funcs-to-ignore)))
    (<span style="color: #718c00;">let</span> (value)
      (<span style="color: #718c00;">dolist</span> (element funcs-to-whitelist nil)
        (add-to-list 'mc/cmds-to-run-once element)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org557c5ae" class="outline-3">
<h3 id="org557c5ae"><span class="section-number-3">5.28</span> Expand Region</h3>
<div class="outline-text-3" id="text-5-28">
<p>
Nice way to expand selections to semantic regions. Read more on
<a href="https://github.com/magnars/expand-region.el">https://github.com/magnars/expand-region.el</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">expand-region</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"C-="</span> . er/expand-region))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c467c6" class="outline-3">
<h3 id="org3c467c6"><span class="section-number-3">5.29</span> Hooks</h3>
<div class="outline-text-3" id="text-5-29">
<p>
In general, hooks may be best with other configuration items, but
if they are just pieces on their own, they belong here.
</p>
</div>

<div id="outline-container-org78479d0" class="outline-4">
<h4 id="org78479d0"><span class="section-number-4">5.29.1</span> Ensure proper lisping</h4>
<div class="outline-text-4" id="text-5-29-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-save-hook  'check-parens nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1032eb" class="outline-4">
<h4 id="orgc1032eb"><span class="section-number-4">5.29.2</span> Auto Reverting in modes</h4>
<div class="outline-text-4" id="text-5-29-2">
<p>
For view-only buffers rendering content, it is useful to have them
<code>auto-revert</code> in case of changes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'doc-view-mode-hook 'auto-revert-mode)
(add-hook 'image-mode 'auto-revert-mode)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3c17838" class="outline-3">
<h3 id="org3c17838"><span class="section-number-3">5.30</span> Recentf</h3>
<div class="outline-text-3" id="text-5-30">
<p>
I enable emacs remembering recently open files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(recentf-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org822c59f" class="outline-3">
<h3 id="org822c59f"><span class="section-number-3">5.31</span> Executable Scripts on save</h3>
<div class="outline-text-3" id="text-5-31">
<p>
Taken from: <a href="http://mbork.pl/2015-01-10_A_few_random_Emacs_tips">http://mbork.pl/2015-01-10_A_few_random_Emacs_tips</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-save-hook
          'executable-make-buffer-file-executable-if-script-p)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5c2919" class="outline-3">
<h3 id="orgd5c2919"><span class="section-number-3">5.32</span> Scroll Screen Position</h3>
<div class="outline-text-3" id="text-5-32">
<p>
This is one of those cool finds for a problem I mostly knew that I
had. I often hit <code>C-v</code> by accident and lose my place.  With the
following setting, <code>M-v</code> completely undoes the scroll leaving the
cursor back in the original position.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> scroll-preserve-screen-position 'always)
</pre>
</div>

<p>
Thanks to <a href="http://irreal.org/blog/?p=3963">http://irreal.org/blog/?p=3963</a> for the tip.
</p>
</div>
</div>

<div id="outline-container-org8962b75" class="outline-3">
<h3 id="org8962b75"><span class="section-number-3">5.33</span> Unique Buffer Names</h3>
<div class="outline-text-3" id="text-5-33">
<p>
When editing files with the same name, but different location, a
unique identifier (based on path) is preferred over a number.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">uniquify</span>
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> uniquify-buffer-name-style 'post-forward
        uniquify-separator <span style="color: #3e999f;">":"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge09c137" class="outline-3">
<h3 id="orge09c137"><span class="section-number-3">5.34</span> Focus Mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h3>
<div class="outline-text-3" id="text-5-34">
<p>
Dim everything except for the thing-at-point. Improves focus when
reading code and text.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">focus</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"C-c f"</span> . focus-mode)
  (<span style="color: #3e999f;">"C-c F"</span> . focus-read-only-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb05399" class="outline-3">
<h3 id="orgcb05399"><span class="section-number-3">5.35</span> Paperless Mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h3>
<div class="outline-text-3" id="text-5-35">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">paperless</span>
  <span style="color: #8959a8;">:defer</span> t
  <span style="color: #8959a8;">:quelpa</span>
  (paperless <span style="color: #8959a8;">:fetcher</span> github <span style="color: #8959a8;">:repo</span> <span style="color: #3e999f;">"atgreen/paperless"</span>)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> paperless-capture-directory <span style="color: #3e999f;">"~/Desktop/"</span>
      paperless-root-directory <span style="color: #3e999f;">"~/Documents/Personal/"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf15d1ba" class="outline-3">
<h3 id="orgf15d1ba"><span class="section-number-3">5.36</span> Relative line numbers&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h3>
<div class="outline-text-3" id="text-5-36">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">linum-relative</span>
  <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7e405c" class="outline-3">
<h3 id="orgc7e405c"><span class="section-number-3">5.37</span> ImageMagick</h3>
<div class="outline-text-3" id="text-5-37">
<p>
Register file types if we can.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">when</span> (fboundp 'imagemagick-register-types)
  (imagemagick-register-types))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3dca6ae" class="outline-2">
<h2 id="org3dca6ae"><span class="section-number-2">6</span> Style</h2>
<div class="outline-text-2" id="text-6">
<p>
The following sections describe items that affect the visual
elements of Emacs.
</p>
</div>

<div id="outline-container-org40a4a18" class="outline-3">
<h3 id="org40a4a18"><span class="section-number-3">6.1</span> Frame Changes</h3>
<div class="outline-text-3" id="text-6-1">
<p>
These following items make Emacs really beautiful on every
platform.  I remove the menu bar, tool bar and the scroll bar for
starters.  Then, I setup the fringe area with some items
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">if</span> (fboundp 'menu-bar-mode) (menu-bar-mode -1))
(<span style="color: #718c00;">if</span> (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(<span style="color: #718c00;">if</span> (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7472093" class="outline-3">
<h3 id="org7472093"><span class="section-number-3">6.2</span> Window Changes</h3>
<div class="outline-text-3" id="text-6-2">
<p>
In the fringe area, I like to have markers to show me where the
buffer begins/ends on the right. On the left, I have emacs show
little dashes where empty lines exist.
</p>

<p>
In the title bar, I have it print the buffer name, full file name
and size.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq-default</span> indicate-buffer-boundaries 'right)
(<span style="color: #718c00;">setq-default</span> indicate-empty-lines t)
(<span style="color: #718c00;">setq-default</span> frame-title-format '(<span style="color: #3e999f;">"%b %f %I"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4031c3c" class="outline-3">
<h3 id="org4031c3c"><span class="section-number-3">6.3</span> Faces</h3>
<div class="outline-text-3" id="text-6-3">
</div><div id="outline-container-org8dad21b" class="outline-4">
<h4 id="org8dad21b"><span class="section-number-4">6.3.1</span> Default Fonts</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
On my OS, I have <i>Source Code Pro</i> installed.  Let's use that
there.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-face-attribute 'default nil <span style="color: #8959a8;">:font</span> <span style="color: #3e999f;">"Source Code Pro-12"</span>)
</pre>
</div>

<p>
Setup a strike-through font for agenda items. The <i>done</i> items
are now easily overlooked within an agenda or task list.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-face-attribute 'org-agenda-done nil <span style="color: #8959a8;">:strike-through</span> t)

(<span style="color: #718c00;">defadvice</span> <span style="color: #f5871f;">enable-theme</span> (after org-strike-done activate)
  <span style="color: #8959a8;">"Setup org-agenda-done faces to have strike-through on"</span>
  (<span style="color: #718c00;">and</span> (message <span style="color: #3e999f;">"Running advice"</span>)
       (set-face-attribute 'org-agenda-done nil <span style="color: #8959a8;">:strike-through</span> t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c3923f" class="outline-4">
<h4 id="org8c3923f"><span class="section-number-4">6.3.2</span> Trying out fonts on Windows</h4>
<div class="outline-text-4" id="text-6-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/windows-set-font</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (set-face-attribute 'default nil <span style="color: #8959a8;">:font</span> (w32-select-font)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0df1a1b" class="outline-4">
<h4 id="org0df1a1b"><span class="section-number-4">6.3.3</span> Dynamic Font sizes</h4>
<div class="outline-text-4" id="text-6-3-3">
<p>
Changing font sizes in presentations is crucial to have at hand. I
use the following keybindings. <code>C--</code> overrides the negative
argument function, but that one is also accessible by <code>M--</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/change-frame-font-size</span> (fn)
  (<span style="color: #718c00;">let*</span> ((font-name (frame-parameter nil 'font))
         (decomposed-font-name (x-decompose-font-name font-name))
         (font-size (string-to-int (aref decomposed-font-name 5))))
    (aset decomposed-font-name 5 (int-to-string (funcall fn font-size)))
    (set-frame-font (x-compose-font-name decomposed-font-name))))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/frame-text-scale-increase</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (bnb/change-frame-font-size '1+))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/frame-text-scale-decrease</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (bnb/change-frame-font-size '1-))

(<span style="color: #718c00;">bind-keys</span>
 (<span style="color: #3e999f;">"C-+"</span> . text-scale-increase)
 (<span style="color: #3e999f;">"C--"</span> . text-scale-decrease)
 (<span style="color: #3e999f;">"s--"</span> . bnb/frame-text-scale-decrease)
 (<span style="color: #3e999f;">"s-+"</span> . bnb/frame-text-scale-increase)
 (<span style="color: #3e999f;">"s-="</span> . bnb/frame-text-scale-increase))
</pre>
</div>
</div>
</div>

<div id="outline-container-org73f28a2" class="outline-4">
<h4 id="org73f28a2"><span class="section-number-4">6.3.4</span> Mode Line Style</h4>
<div class="outline-text-4" id="text-6-3-4">
<p>
I dislike the box around the <code>mode-line</code> making it look like a
button.  I disable (set to <code>nil</code>) this face attribute, <code>box</code>, to
get a flat feel.  Be sure to do it to all <code>mode-line</code> faces that
have this attribute.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-face-attribute 'mode-line nil <span style="color: #8959a8;">:box</span> nil)
(set-face-attribute 'mode-line-inactive nil <span style="color: #8959a8;">:box</span> nil)
(set-face-attribute 'mode-line-highlight nil <span style="color: #8959a8;">:box</span> nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabd49be" class="outline-4">
<h4 id="orgabd49be"><span class="section-number-4">6.3.5</span> Missing Glyphs</h4>
<div class="outline-text-4" id="text-6-3-5">
<p>
If I ever use a font with a missing glyph, this will let Emacs
check the <i>Symbola</i> font for the missing data.
</p>

<p>
<a href="http://users.teilar.gr/~g1951d/">Download Symbola</a> if you do not have it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-fontset-font <span style="color: #3e999f;">"fontset-default"</span> nil
                  (font-spec <span style="color: #8959a8;">:size</span> 20 <span style="color: #8959a8;">:name</span> <span style="color: #3e999f;">"Symbola"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org530cd7f" class="outline-3">
<h3 id="org530cd7f"><span class="section-number-3">6.4</span> Themes</h3>
<div class="outline-text-3" id="text-6-4">
<p>
You can layer themes by enabling them in turn, but this is not the
default usage for most of us. <a href="http://www.greghendershott.com">Greg Hendershott</a> suggests <a href="http://www.greghendershott.com/2017/02/emacs-themes.html">something
like the following code.</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/disable-all-themes</span> ()
    (<span style="color: #718c00;">interactive</span>)
    (mapc #'disable-theme custom-enabled-themes))

(<span style="color: #718c00;">defvar</span> <span style="color: #eab700;">bnb/theme-hooks</span> nil
  <span style="color: #8959a8;">"((theme-id . function) ...)"</span>)

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/add-theme-hook</span> (theme-id hook-func)
  (add-to-list 'bnb/theme-hooks (cons theme-id hook-func)))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/load-theme-advice</span> (f theme-id <span style="color: #4271ae;">&amp;optional</span> no-confirm no-enable <span style="color: #4271ae;">&amp;rest</span> args)
  <span style="color: #8959a8;">"Changes `</span><span style="color: #4271ae;">load-them</span><span style="color: #8959a8;">' in two ways:</span>
<span style="color: #8959a8;">1. Disables enables themes</span>
<span style="color: #8959a8;">2. Calls registered theme hooks"</span>
  (<span style="color: #718c00;">unless</span> no-enable
    (bnb/disable-all-themes))
  (<span style="color: #718c00;">prog1</span>
      (apply f theme-id no-confirm no-enable args)
    (<span style="color: #718c00;">unless</span> no-enable
      (<span style="color: #718c00;">pcase</span> (assq theme-id bnb/theme-hooks)
        (`(,_ . ,f) (funcall f))))))

(advice-add 'load-theme
            <span style="color: #8959a8;">:around</span>
            #'bnb/load-theme-advice)
</pre>
</div>
</div>

<div id="outline-container-org7af705f" class="outline-4">
<h4 id="org7af705f"><span class="section-number-4">6.4.1</span> Extra Themes</h4>
<div class="outline-text-4" id="text-6-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">gruvbox-theme</span> <span style="color: #8959a8;">:ensure</span> t <span style="color: #8959a8;">:defer</span> t)

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">material-theme</span> <span style="color: #8959a8;">:ensure</span> t <span style="color: #8959a8;">:defer</span> t
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/material-theme-hook</span> ()
    (set-face-attribute 'which-key-key-face nil <span style="color: #8959a8;">:foreground</span>
                        (face-attribute 'error <span style="color: #8959a8;">:foreground</span>))
    (<span style="color: #718c00;">loop</span> for n from 1 to 8
          do (set-face-attribute (intern-soft (format <span style="color: #3e999f;">"org-level-%s"</span> n))
                                 nil
                                 <span style="color: #8959a8;">:background</span> 'unspecified
                                 <span style="color: #8959a8;">:box</span>        'unspecified)))
  (bnb/add-theme-hook 'material-light #'bnb/material-theme-hook)
  (bnb/add-theme-hook 'material       #'bnb/material-theme-hook))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd0e9cc1" class="outline-4">
<h4 id="orgd0e9cc1"><span class="section-number-4">6.4.2</span> Remember last themes</h4>
<div class="outline-text-4" id="text-6-4-2">
<p>
Instead of specifying a set theme each time (or statically here),
I can just load the last one.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">remember-last-theme</span>
  <span style="color: #8959a8;">:defer</span> t
  <span style="color: #8959a8;">:quelpa</span>
  (remember-last-theme <span style="color: #8959a8;">:fetcher</span> github <span style="color: #8959a8;">:repo</span> <span style="color: #3e999f;">"anler/remember-last-theme"</span>)
  <span style="color: #8959a8;">:config</span> (remember-last-theme-enable))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7f21adb" class="outline-3">
<h3 id="org7f21adb"><span class="section-number-3">6.5</span> Smart Mode Line</h3>
<div class="outline-text-3" id="text-6-5">
<p>
This package reduces the noise in the mode-line and allows me to
customize just the pieces that I need.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">smart-mode-line</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">setq</span> sml/theme 'respectful)
  (sml/setup))
</pre>
</div>
</div>
</div>

<div id="outline-container-org16de0a2" class="outline-3">
<h3 id="org16de0a2"><span class="section-number-3">6.6</span> Font lock profiling&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h3>
<div class="outline-text-3" id="text-6-6">
<p>
Allow for profiling of font-locking.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">font-lock-profiler</span>
  <span style="color: #8959a8;">:quelpa</span>
  (font-lock-profiler <span style="color: #8959a8;">:fetcher</span> github <span style="color: #8959a8;">:repo</span> <span style="color: #3e999f;">"Lindydancer/font-lock-profiler"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org86aa8d9" class="outline-2">
<h2 id="org86aa8d9"><span class="section-number-2">7</span> BNB Helpers</h2>
<div class="outline-text-2" id="text-7">
<p>
This is a collection of code specific to how I use emacs.  Some
are from different websites or other Emacs users.
</p>
</div>

<div id="outline-container-orgdbd592d" class="outline-3">
<h3 id="orgdbd592d"><span class="section-number-3">7.1</span> Exit behavior</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Instead of exiting emacs, I prefer to leave it running and only
minimize (iconize) it. Especially since I use <code>server</code> with emacs,
it is advantageous to not kill my session by accident
(muscle-memory). This idea is from <a href="http://emacs-fu.blogspot.com/2009/03/windows-and-daemons.html">Emacs-Fu</a>.
</p>

<p>
To accomplish this, I advise the <code>kill-emacs</code> function. But first,
I need to have some pieces in place to perform some functionality
if a killing operation triggers (keystrokes, button presses,
etc).
</p>

<p>
I create a variable, <code>bnb/kill-emacs-hooks</code>, for functions that
need to run before emacs is <i>killed</i>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defvar</span> <span style="color: #eab700;">bnb/kill-emacs-hooks</span>)
(add-hook 'bnb/kill-emacs-hooks
          (<span style="color: #718c00;">lambda</span> () (<span style="color: #718c00;">if</span> (functionp 'server-edit)(server-edit))))
</pre>
</div>

<p>
In the hook above, I call the <code>server-edit</code> function to act as if
I am closing emacs for a file opened via the server API. This has
the effect of providing an illusion of opening the editor on a
specific file and then closing it with normal keypresses.
</p>

<p>
Next, I provide a flag and a function to set the flag if emacs is
to really exit. We always need an escape hatch.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defvar</span> <span style="color: #eab700;">bnb/really-kill-emacs</span> nil)
(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/kill-emacs</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (<span style="color: #718c00;">setq</span> bnb/really-kill-emacs t)
  (kill-emacs))
</pre>
</div>

<p>
Now that mechanism is in place, it is time to augment
<code>kill-emacs</code> with some advice around the function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defadvice</span> <span style="color: #f5871f;">kill-emacs</span> (around bnb/pardon-emacs activate)
  <span style="color: #8959a8;">"Only kill emacs if a prefix is set"</span>
  (run-hooks 'bnb/kill-emacs-hooks)
  (<span style="color: #718c00;">if</span> bnb/really-kill-emacs
      ad-do-it
    (iconify-frame)))
</pre>
</div>

<p>
Now, when any event triggers a call to <code>kill-emacs</code>, a small set
of activities happen. First, the <code>bnb/kill-emacs-hooks</code> execute
and perform their jobs. Next, I check the flag for <i>really</i>
exiting and then call the proper <code>kill-emacs</code> if true. Otherwise,
the flag is false and emacs is simply iconified.
</p>
</div>
</div>

<div id="outline-container-org7d35354" class="outline-3">
<h3 id="org7d35354"><span class="section-number-3">7.2</span> Workweeks</h3>
<div class="outline-text-3" id="text-7-2">
<p>
This is vestigal content from my Intel days and this generates
their idea of a work week number.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/workweek</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (<span style="color: #718c00;">let*</span> ((now (current-time))
         (weeks (string-to-number
                 (format-time-string <span style="color: #3e999f;">"%W"</span> now)))
         (days (time-to-day-in-year now))
         (daynum (string-to-number
                  (format-time-string <span style="color: #3e999f;">"%w"</span> now)))
         (left (% days 7)))
    (<span style="color: #718c00;">if</span> (<span style="color: #718c00;">and</span> (= 0 daynum) (= left 0))
        weeks
      (+ 1 weeks))))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/workweek-string</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (concat <span style="color: #3e999f;">"WW"</span>
          (number-to-string
           (bnb/workweek))))

(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">calendar</span>)
(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/workweek-from-gregorian</span> (<span style="color: #4271ae;">&amp;optional</span> date)
  (<span style="color: #718c00;">let*</span> ((date (<span style="color: #718c00;">or</span> date (calendar-current-date)))
         (year (calendar-extract-year date))
         (fst (calendar-day-of-week (list 1 1 year)))
         (x   (<span style="color: #718c00;">if</span> (&gt;= fst 4)1 0)))
    (+ x
       (car
        (calendar-iso-from-absolute
         (calendar-absolute-from-gregorian date))))))

(<span style="color: #718c00;">setq</span> calendar-week-start-day 1
      calendar-intermonth-text
        '(propertize
          (format <span style="color: #3e999f;">"%2d"</span>
                  (bnb/workweek-from-gregorian (list month day year)))
          'font-lock-face 'font-lock-function-name-face))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec75d31" class="outline-3">
<h3 id="orgec75d31"><span class="section-number-3">7.3</span> Better window splitting functions</h3>
<div class="outline-text-3" id="text-7-3">
<p>
<a href="http://www.reddit.com/r/emacs/comments/25v0eo/you_emacs_tips_and_tricks/chldury">http://www.reddit.com/r/emacs/comments/25v0eo/you_emacs_tips_and_tricks/chldury</a>
</p>

<p>
These settings split the window and load a previous buffer (instead
of the same buffer in both).  This has a better chance of being
what I want when splitting strings.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/vplit-last-buffer</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (split-window-vertically)
  (other-window 1 nil)
  (switch-to-next-buffer))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/hsplit-last-buffer</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (split-window-horizontally)
  (other-window 1 nil)
  (switch-to-next-buffer))

(<span style="color: #718c00;">bind-keys</span>
 (<span style="color: #3e999f;">"C-x 2"</span> . bnb/vplit-last-buffer)
 (<span style="color: #3e999f;">"C-x 3"</span> . bnb/hsplit-last-buffer))
</pre>
</div>
</div>
</div>

<div id="outline-container-org76bb8f7" class="outline-3">
<h3 id="org76bb8f7"><span class="section-number-3">7.4</span> Weekly Time Reporting</h3>
<div class="outline-text-3" id="text-7-4">
<p>
This is a function to create an entry like a datetree, but using
years and workweeks instead.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/find-year-create</span> (year)
  (<span style="color: #718c00;">let</span> ((re <span style="color: #3e999f;">"^\\**[ \t]+</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">[12][0-9]\\{3\\}</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">"</span>)
        match)
    (org-narrow-to-subtree)
    (goto-char (point-min))
    (<span style="color: #718c00;">while</span> (<span style="color: #718c00;">and</span> (<span style="color: #718c00;">setq</span> match (re-search-forward re nil t))
                (goto-char (match-beginning 1))
                (&lt; (string-to-number (match-string 1)) year)))
    (<span style="color: #718c00;">cond</span>
     ((not match)
      (goto-char (point-max))
      (<span style="color: #718c00;">or</span> (bolp) (newline))
      (insert (format  <span style="color: #3e999f;">"** %s\n"</span> year)))
     ((= (string-to-number (match-string 1)) year)
      (goto-char (point-at-bol)))
     (t
      (beginning-of-line 1)
      (insert (format  <span style="color: #3e999f;">"** %s\n"</span> year))))))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/find-ww-create</span> (ww)
  (<span style="color: #718c00;">let</span> ((re <span style="color: #3e999f;">"^\\**[ \t]+\\WW</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">[0-9]\\{2\\}</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">"</span>)
        match)
    (org-narrow-to-subtree)
    (goto-char (point-min))
    (<span style="color: #718c00;">while</span> (<span style="color: #718c00;">and</span> (<span style="color: #718c00;">setq</span> match (re-search-forward re nil t))
                (goto-char (match-beginning 1))
                (&lt; (string-to-number (match-string 1)) ww)))
    (<span style="color: #718c00;">cond</span>
     ((not match)
      (goto-char (point-max))
      (<span style="color: #718c00;">or</span> (bolp) (newline))
      (insert (format <span style="color: #3e999f;">"*** WW%02d\n"</span> ww)))
     ((= (string-to-number (match-string 1)) ww)
      (goto-char (point-at-bol)))
     (t
      (beginning-of-line 1)
      (insert (format <span style="color: #3e999f;">"*** WW%02d\n"</span> ww))))))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/insert-weekly-time-sheet</span> ()
  (<span style="color: #718c00;">with-temp-buffer</span>
    (insert
          (concat  <span style="color: #3e999f;">"#+BEGIN: clocktable :maxlevel 3 :scope agenda-with-archives :block lastweek :fileskip0 t :properties (\"Score\") :indent nil \n"</span>
                   <span style="color: #3e999f;">"#+TBLFM: $6='(org-clock-time% @2$4 $3..$5);%.1f::@2$2=vsum(@3$2..@&gt;$2)\n"</span>
                   <span style="color: #3e999f;">"#+END:\n\n"</span>))
         (goto-char (point-min))
         (org-update-dblock)
         (buffer-substring (point-min) (point-max))))

     (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/insert-weekly-clocking</span> ()
         (<span style="color: #718c00;">let</span> ((year (number-to-string (nth 2 (calendar-gregorian-from-absolute (org-today)))))
               (ww (bnb/workweek)))
           (goto-char (point-min))
           (goto-char (cdr (org-id-find <span style="color: #3e999f;">"clocking"</span>)))
           (bnb/find-year-create (string-to-number year))
           (bnb/find-ww-create ww)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org962d1bb" class="outline-3">
<h3 id="org962d1bb"><span class="section-number-3">7.5</span> Weekly Score Goal in Org-Agenda</h3>
<div class="outline-text-3" id="text-7-5">
<p>
I use a scoring system to keep track of my overall progress.  This
involves scoring my tasks and attributing my idea of impact of a
particular done item.
</p>

<p>
To use these numbers, I do a weekly review on Monday and compare
the numbers to past years/weeks/etc. To keep pushing forward, this
little bit of code will insert a running status at the top of my
agenda.
</p>

<p>
If I am on track for the given day (at or above the scaled goal),
all is green.  Otherwise, I get a warning type formatting above 80%
and error type formatting under.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Define my goal to hit</span>
(<span style="color: #718c00;">defvar</span> <span style="color: #eab700;">bnb/weekly-score-goal</span> 42)

<span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Add up all the scores from DONE items in the agenda files</span>
(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/agenda-score-goal</span> ()
  (<span style="color: #718c00;">let*</span> ((score <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Add up all scores from DONE items</span>
          (apply '+
                 (org-map-entries
                  (<span style="color: #718c00;">lambda</span> () (string-to-number (<span style="color: #718c00;">or</span> (org-entry-get (point) <span style="color: #3e999f;">"Score"</span>) <span style="color: #3e999f;">"0"</span>)))
                  <span style="color: #3e999f;">"/DONE"</span> 'agenda)))
         (scaled-goal (* bnb/weekly-score-goal (/ (string-to-number (format-time-string <span style="color: #3e999f;">"%w"</span>)) 5.0)))
         (face (<span style="color: #718c00;">cond</span> ((&gt;= score scaled-goal) 'success)
                     ((&gt;= score (* .8 scaled-goal)) 'warning)
                     (t 'error))))
    (insert
     (concat
      (propertize
       (format <span style="color: #3e999f;">"Score Goal (%d): "</span> scaled-goal) 'face 'org-agenda-structure)
      (propertize
       (format <span style="color: #3e999f;">"%d/%d\n"</span> score bnb/weekly-score-goal) 'face face)))))

<span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">This hook runs first in the agenda (and before it is set to read-only)</span>
(add-hook 'org-agenda-mode-hook 'bnb/agenda-score-goal)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3286ed3" class="outline-3">
<h3 id="org3286ed3"><span class="section-number-3">7.6</span> Calendars</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">calfw</span>
  <span style="color: #8959a8;">:commands</span> (bnb/calfw-calendars)
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">calfw-cal</span>)
  (<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">calfw-ical</span>)
  (<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">calfw-org</span>)
  (<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">sunshine</span>
    <span style="color: #8959a8;">:ensure</span> t
    <span style="color: #8959a8;">:commands</span> bnb/get-forecast-data
    <span style="color: #8959a8;">:defines</span> bnb/calfw-calendars-list
    <span style="color: #8959a8;">:config</span>
    (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/get-forecast-data</span> (b e)
      (<span style="color: #718c00;">let*</span> ((url (sunshine-make-url sunshine-location sunshine-units))
             (forecast (<span style="color: #718c00;">if</span> (sunshine-forecast-cache-expired url)
                           (<span style="color: #718c00;">with-current-buffer</span> (url-retrieve-synchronously url)
                             (goto-char (point-min))
                             (sunshine-extract-response))
                         (<span style="color: #718c00;">with-temp-buffer</span>
                           (mm-disable-multibyte)
                           (url-cache-extract (url-cache-create-filename url))
                           (sunshine-extract-response)))))
        (<span style="color: #718c00;">cl-loop</span> for day across (cdr (assoc 'list forecast)) collect
                 (make-cfw:event
                  <span style="color: #8959a8;">:title</span> (format <span style="color: #3e999f;">"%s/%s&#176;, %s"</span>
                                 (round (cdr (assoc 'min (cdr (assoc 'temp day)))))
                                 (round (cdr (assoc 'max (cdr (assoc 'temp day)))))
                                 (cdr (assoc 'main (elt (cdr (assoc 'weather day)) 0))))
                  <span style="color: #8959a8;">:start-date</span> (cfw:emacs-to-calendar (seconds-to-time (cdr (assoc 'dt day)))))))))
  (<span style="color: #718c00;">defvar</span> <span style="color: #eab700;">bnb/calfw-calendars-list</span>
      (list (cfw:org-create-source <span style="color: #3e999f;">"Green"</span>)
            (make-cfw:source <span style="color: #8959a8;">:name</span> <span style="color: #3e999f;">"Weather"</span> <span style="color: #8959a8;">:data</span> 'bnb/get-forecast-data <span style="color: #8959a8;">:color</span> <span style="color: #3e999f;">"IndianRed"</span>)))
  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/calfw-calendars</span> ()
    (<span style="color: #718c00;">interactive</span>)
    (cfw:open-calendar-buffer
     <span style="color: #8959a8;">:contents-sources</span> bnb/calfw-calendars-list)))
<span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">For weather into the calendar</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org628b563" class="outline-3">
<h3 id="org628b563"><span class="section-number-3">7.7</span> Auto-display agenda</h3>
<div class="outline-text-3" id="text-7-7">
<p>
From
<a href="http://lists.gnu.org/archive/html/emacs-orgmode/2010-03/msg00367.html">http://lists.gnu.org/archive/html/emacs-orgmode/2010-03/msg00367.html</a>,
John Weigley shows a way to display the agenda after some period
of inactivity.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/jump-to-org-agenda</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (<span style="color: #718c00;">let</span> ((buf (get-buffer <span style="color: #3e999f;">"*Org Agenda*"</span>))
        wind)
    (<span style="color: #718c00;">if</span> buf
        (<span style="color: #718c00;">if</span> (<span style="color: #718c00;">setq</span> wind (get-buffer-window buf))
            (select-window wind)
          (<span style="color: #718c00;">if</span> (called-interactively-p)
              (<span style="color: #718c00;">progn</span>
                (select-window (display-buffer buf t t))
                (org-fit-window-to-buffer))
            (<span style="color: #718c00;">with-selected-window</span> (display-buffer buf)
              (org-fit-window-to-buffer))))
       (bnb/org-agenda-with-tip nil))))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/idle-agenda</span> (<span style="color: #4271ae;">&amp;optional</span> arg)
  (<span style="color: #718c00;">interactive</span> <span style="color: #3e999f;">"P"</span>)
  (<span style="color: #718c00;">setq</span> bnb/idle-agenda
        (<span style="color: #718c00;">if</span> arg
            (cancel-timer bnb/iagenda)
          (run-with-idle-timer 3600 t 'bnb/jump-to-org-agenda))))

(bnb/idle-agenda)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb4821f1" class="outline-3">
<h3 id="orgb4821f1"><span class="section-number-3">7.8</span> Transparency</h3>
<div class="outline-text-3" id="text-7-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ring</span>
  <span style="color: #8959a8;">:commands</span> (bnb/transparency-apply bnb/transparency-next bnb/transparency-previous
                                    bnb/transparency-cycle bnb/transparency-add)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> bnb/transparency-ring
        (ring-convert-sequence-to-ring (list '(100 100) '(100 50) '(100 10) '(95 50) '(90 50) '(85 50)))
        bnb/transparency
        (ring-ref bnb/transparency-ring 0))

  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/transparency-apply</span> (trans)
    (set-frame-parameter (selected-frame) 'alpha (<span style="color: #718c00;">setq</span> bnb/transparency trans)))

  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/transparency-next</span> ()
    (<span style="color: #718c00;">interactive</span>)
    (bnb/transparency-apply (ring-next bnb/transparency-ring bnb/transparency)))

  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/transparency-previous</span> ()
    (<span style="color: #718c00;">interactive</span>)
    (bnb/transparency-apply (ring-previous bnb/transparency-ring bnb/transparency)))

  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/transparency-cycle</span> ()
    (<span style="color: #718c00;">interactive</span>)
    (bnb/transparency-next))

  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/transparency-add</span> (active inactive)
    (<span style="color: #718c00;">interactive</span> <span style="color: #3e999f;">"nActive Transparency:\nnInactive Transparency:"</span>)
    (ring-insert+extend bnb/transparency-ring (list active inactive) t)
    (bnb/transparency-apply (list active inactive))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org89aa292" class="outline-3">
<h3 id="org89aa292"><span class="section-number-3">7.9</span> Styled HTML Export</h3>
<div class="outline-text-3" id="text-7-9">
<p>
This is how I get the one-page html output for Github Pages. There
are two main parts to setting up and executing the export.
</p>

<p>
First, I use a <code>SETUPFILE</code> from
<a href="https://github.com/fniessen/org-html-themes">https://github.com/fniessen/org-html-themes</a>. Specifically, I use
the <i>readtheorg</i> style.
</p>

<p>
Second, I setup the emacs theme correctly for nice code
output. Syntax highlighting in the export will pull from the
current theme. I don't want this. Instead, I want to specify which
theme to use for <i>every</i> export.
</p>

<p>
The code below stores away the current list of enabled themes
before disabling them all. Then, it enables my preferred export
theme (<code>sanityinc-tomorrow-day</code>) before performing the
export. Finally, it disables the last theme and renables all of the
ones on the list.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/export-readme</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (<span style="color: #718c00;">let</span> ((themes custom-enabled-themes))
    (mapcar 'disable-theme themes)
    (load-theme 'sanityinc-tomorrow-day)
    (org-html-export-to-html)
    (rename-file <span style="color: #3e999f;">"Readme.html"</span> <span style="color: #3e999f;">"index.html"</span> t)
    (disable-theme 'sanityinc-tomorrow-day)
    (mapcar 'load-theme (reverse themes))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org160e26a" class="outline-3">
<h3 id="org160e26a"><span class="section-number-3">7.10</span> Auto-indent when pasting</h3>
<div class="outline-text-3" id="text-7-10">
<p>
Automatically indent pasted blocks of text.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #718c00;">dolist</span> (command '(yank yank-pop))
   (eval `(<span style="color: #718c00;">defadvice</span> ,command (after indent-region activate)
            (<span style="color: #718c00;">and</span> (not current-prefix-arg)
                 (<span style="color: #718c00;">let</span> ((mark-even-if-inactive transient-mark-mode))
                   (indent-region (region-beginning) (region-end) nil))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org99e5747" class="outline-3">
<h3 id="org99e5747"><span class="section-number-3">7.11</span> Hide mode line&#xa0;&#xa0;&#xa0;<span class="tag"><span class="PENDING">PENDING</span></span></h3>
<div class="outline-text-3" id="text-7-11">
<p>
This is a fun one I picked from <a href="https://ogbe.net/emacsconfig.html">https://ogbe.net/emacsconfig.html</a>
This block of code hides the mode-line for the current buffer
(window).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defvar-local</span> <span style="color: #eab700;">bnb/hide-mode-line-mode</span> nil)
(<span style="color: #718c00;">define-minor-mode</span> <span style="color: #f5871f;">bnb/hide-mode-line-mode</span>
  <span style="color: #8959a8;">"Minor mode to hide mode-line in current buffer"</span>
  <span style="color: #8959a8;">:init-value</span> nil
  <span style="color: #8959a8;">:global</span> nil
  <span style="color: #8959a8;">:variable</span> bnb/hide-mode-line-mode
  <span style="color: #8959a8;">:group</span> 'editing-basics
  (<span style="color: #718c00;">if</span> bnb/hide-mode-line-mode
      (<span style="color: #718c00;">setq</span> bnb/hide-mode-line-mode/saved-format mode-line-format
            mode-line-format nil)
    (<span style="color: #718c00;">setq</span> mode-line-format bnb/hide-mode-line-mode/saved-format
          bnb/hide-mode-line-mode/saved-format nil))
  (force-mode-line-update)
  (redraw-display)
  (<span style="color: #718c00;">when</span> (<span style="color: #718c00;">and</span> (called-interactively-p 'interactive)
             hidden-mode-line-mode)
    (run-with-idle-timer
     0 nil 'message
     (concat <span style="color: #3e999f;">"Goodbye mode line!"</span>
             <span style="color: #3e999f;">"Use M-x hidden-mode-line-mode to make the mode-line appear"</span>))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd7596cf" class="outline-2">
<h2 id="orgd7596cf"><span class="section-number-2">8</span> Company</h2>
<div class="outline-text-2" id="text-8">
<p>
<a href="http://company-mode.github.io">Company Mode</a> is an in-buffer completion system. To get started, I
need to load the mode and bind some keys.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">company</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:init</span>
  (add-hook 'after-init-hook 'global-company-mode)
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"&lt;C-tab&gt;"</span> . company-complete-common-or-cycle)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"C-&lt;tab&gt;"</span> 'company-complete org-mode-map)
  (<span style="color: #718c00;">bind-keys</span> <span style="color: #8959a8;">:map</span> company-active-map
             (<span style="color: #3e999f;">"s-&lt;tab&gt;"</span> . company-complete-common-or-cycle)
             (<span style="color: #3e999f;">"C-n"</span>     . company-select-next)
             (<span style="color: #3e999f;">"C-p"</span>     . company-select-previous))
  <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Turn off the auto downcasing of things</span>
  (<span style="color: #718c00;">setq</span> company-dabbrev-downcase nil
        company-show-numbers t
        company-tooltip-align-annotations t
        company-selection-wrap-around t
        company-tooltip-flip-when-above t
        company-dabbrev-code-everywhere t
        company-dabbrev-code-ignore-case t))
</pre>
</div>
</div>
</div>


<div id="outline-container-org12dbdce" class="outline-2">
<h2 id="org12dbdce"><span class="section-number-2">9</span> File Management</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-org2161f65" class="outline-3">
<h3 id="org2161f65"><span class="section-number-3">9.1</span> Dired</h3>
<div class="outline-text-3" id="text-9-1">
<p>
So, I used <code>dired+</code> instead of the regular <code>dired</code>. It offers more
interesting colors and more flexible ways to mark files.
</p>

<p>
For example, to mark by extension, press <code>*.</code>, then type the
extension (with dot).
</p>

<p>
Here I enable the <code>dired-find-alternate-file</code> command. It lets my
just type <code>a</code> to replace the current buffer and reduces the
accumulating <code>dired</code> buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">dired+</span>
  <span style="color: #8959a8;">:defer</span> 10
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:config</span>
  (put 'dired-find-alternate-file 'disabled nil)
  (<span style="color: #718c00;">when</span> (eq system-type 'windows-nt)
    (<span style="color: #718c00;">setq</span> dired-guess-shell-alist-user
          '((<span style="color: #3e999f;">"\\.pdf"</span> <span style="color: #3e999f;">"SumatraPDF.exe"</span>)))))
</pre>
</div>

<p>
Also, there is a nice faculty to run an external command on a given
file with <code>!</code>.  <code>Dired</code> has some idea of what to run, but I can make
it smarter on windows.
</p>
</div>
</div>

<div id="outline-container-orge45ecd8" class="outline-3">
<h3 id="orge45ecd8"><span class="section-number-3">9.2</span> Sunrise Commander</h3>
<div class="outline-text-3" id="text-9-2">
<p>
I always seem to need something better than <code>dired</code> when moving
files around. Sunrise commander seems to fit the bill nicely.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">sunrise-commander</span>
  <span style="color: #8959a8;">:defer</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"&lt;f8&gt;"</span> . sunrise)
  <span style="color: #8959a8;">:quelpa</span> (sunrise-commander
           <span style="color: #8959a8;">:fetcher</span> github
           <span style="color: #8959a8;">:repo</span> <span style="color: #3e999f;">"escherdragon/sunrise-commander"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org494e14c" class="outline-2">
<h2 id="org494e14c"><span class="section-number-2">10</span> Smart Tabs</h2>
<div class="outline-text-2" id="text-10">
<p>
<a href="http://www.emacswiki.org/emacs-en/SmartTabs">SmartTabs</a> try to do the right thing regarding tabs/spaces in
indentation/alignment. It installs through the package interface. Look for
<code>smart-tabs-mode</code>.
</p>

<p>
By default, I'm enabling it in all modes that I can.
</p>

<p>
Since we are dealing with tabs here, I also take the time to set
the default width to 4.  Because of the way this mode works, any
change in the default width will result in code that still aligns.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">smart-tabs-mode</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">setq-default</span> indent-tabs-mode nil)
  (smart-tabs-insinuate 'c 'javascript 'cperl 'c++)
  (<span style="color: #718c00;">setq-default</span> tab-width 4))
</pre>
</div>
</div>

<div id="outline-container-org5fd7588" class="outline-3">
<h3 id="org5fd7588"><span class="section-number-3">10.1</span> Notes</h3>
<div class="outline-text-3" id="text-10-1">
<p>
To re-tab the whole file, use <code>C-x h C-M-\</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc93a615" class="outline-2">
<h2 id="orgc93a615"><span class="section-number-2">11</span> CUA mode</h2>
<div class="outline-text-2" id="text-11">
<p>
<a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#CUA-Bindings">CUA</a> has a primary feature of enabling cut, copy, paste and undo
shortcuts compatible with most applications (C-x, C-c,
C-v). However, it also has interesting rectangle features and
<b>that</b> is why I enable it. I also happen to turn off those other
bindings and prefer the emacs defaults.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(cua-mode t)
(<span style="color: #718c00;">setq</span> cua-enable-cua-keys nil)
</pre>
</div>
</div>

<div id="outline-container-orga8eee59" class="outline-3">
<h3 id="orga8eee59"><span class="section-number-3">11.1</span> Bindings</h3>
<div class="outline-text-3" id="text-11-1">
</div><div id="outline-container-orge813295" class="outline-4">
<h4 id="orge813295"><span class="section-number-4">11.1.1</span> CUA Rectangles</h4>
<div class="outline-text-4" id="text-11-1-1">
<p>
These take place with an active rectangle. To start/cancel a
rectangle use <code>C-RET</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keys</th>
<th scope="col" class="org-left">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">M-&lt;arrow&gt;</td>
<td class="org-left">Move rectangle overlay</td>
</tr>

<tr>
<td class="org-left">C-SPACE</td>
<td class="org-left">Activate region bounded by rectangle</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">M-a</td>
<td class="org-left">Align all words at the left edge</td>
</tr>

<tr>
<td class="org-left">M-b</td>
<td class="org-left">Fill rectangle with blanks (tabs and spaces)</td>
</tr>

<tr>
<td class="org-left">M-c</td>
<td class="org-left">Closes the rectangle by removing left edge blanks</td>
</tr>

<tr>
<td class="org-left">M-f</td>
<td class="org-left">Fills the rectangle with a single character (prompt)</td>
</tr>

<tr>
<td class="org-left">M-i</td>
<td class="org-left">Increases number found on each line of rectangle</td>
</tr>

<tr>
<td class="org-left">M-k</td>
<td class="org-left">Kills the rectangle as normal multi-line kill</td>
</tr>

<tr>
<td class="org-left">M-l</td>
<td class="org-left">Downcases the rectangle</td>
</tr>

<tr>
<td class="org-left">M-m</td>
<td class="org-left">Copies the rectangle for normal multi-line paste</td>
</tr>

<tr>
<td class="org-left">M-n</td>
<td class="org-left">Fills each line with increasing numbers (prompt)</td>
</tr>

<tr>
<td class="org-left">M-o</td>
<td class="org-left">Opens the rect by moving hilighted text right and filling with blanks</td>
</tr>

<tr>
<td class="org-left">M-p</td>
<td class="org-left">Toggles virtual straight rectangle edges</td>
</tr>

<tr>
<td class="org-left">M-P</td>
<td class="org-left">Inserts tabs and spaces to make real straight edges</td>
</tr>

<tr>
<td class="org-left">M-q</td>
<td class="org-left">Performs text filling on the rectangle</td>
</tr>

<tr>
<td class="org-left">M-q</td>
<td class="org-left">Performs text filling on the rectangle</td>
</tr>

<tr>
<td class="org-left">M-r</td>
<td class="org-left">Replaces REGEXP (prompt) by STRING (prompt) in rectangle</td>
</tr>

<tr>
<td class="org-left">M-R</td>
<td class="org-left">Reverse the lines in the rectangle</td>
</tr>

<tr>
<td class="org-left">M-s</td>
<td class="org-left">Fills each line of the rectangle with the same STRING (prompt)</td>
</tr>

<tr>
<td class="org-left">M-t</td>
<td class="org-left">Performs text fill of the rectangle with TEXT (prompt)</td>
</tr>

<tr>
<td class="org-left">M-u</td>
<td class="org-left">Upcases the rectangle</td>
</tr>

<tr>
<td class="org-left">M-&lt;Vertical Bar&gt;</td>
<td class="org-left">Runs shell command on rectangle</td>
</tr>

<tr>
<td class="org-left">M-'</td>
<td class="org-left">Restricts rectangle to lines with CHAR (prompt) at left column</td>
</tr>

<tr>
<td class="org-left">M-/</td>
<td class="org-left">Restricts rectangle to lines matching REGEXP (prompt)</td>
</tr>

<tr>
<td class="org-left">C-?</td>
<td class="org-left">Shows a brief list of the above commands.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">M-C-&lt;UP/DOWN&gt;</td>
<td class="org-left">Scrolls the lines INSIDE the rectangle up/down</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgab71df0" class="outline-4">
<h4 id="orgab71df0"><span class="section-number-4">11.1.2</span> CUA Global Mark</h4>
<div class="outline-text-4" id="text-11-1-2">
<p>
The global mark feature enables a target the receives any
typed/copied/killed text from any buffer (even the current one).
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&lt;ch&gt;</td>
<td class="org-left">All characters (including newlines) you type are inserted at the global mark!</td>
</tr>

<tr>
<td class="org-left">C-x</td>
<td class="org-left">If you cut a region or rectangle, it is automatically inserted at the global mark, and the global mark is advanced.</td>
</tr>

<tr>
<td class="org-left">C-c</td>
<td class="org-left">If you copy a region or rectangle, it is immediately inserted  at the global mark, and the global mark is advanced.</td>
</tr>

<tr>
<td class="org-left">C-v</td>
<td class="org-left">Copies a single character to the global mark.</td>
</tr>

<tr>
<td class="org-left">C-d</td>
<td class="org-left">Moves (i.e. deletes and inserts) a single character to the global mark.</td>
</tr>

<tr>
<td class="org-left">backspace</td>
<td class="org-left">deletes the character before the global mark</td>
</tr>

<tr>
<td class="org-left">delete</td>
<td class="org-left">deletes the character after the global mark.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">S-C-space</td>
<td class="org-left">Jumps to and cancels the global mark.</td>
</tr>

<tr>
<td class="org-left">C-u S-C-space</td>
<td class="org-left">Cancels the global mark (stays in current buffer).</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">TAB</td>
<td class="org-left">Indents the current line or rectangle to the column of the global mark.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<div id="outline-container-org3a7685a" class="outline-2">
<h2 id="org3a7685a"><span class="section-number-2">12</span> Paredit</h2>
<div class="outline-text-2" id="text-12">
<p>
I added <code>paredit-mode</code> to several of the lisp modes that follow.
</p>

<p>
<a href="http://www.emacswiki.org/emacs/PareditCheatsheet">Paredit Cheatsheet</a>
</p>

<p>
<a href="http://danmidwood.com/content/2014/11/21/animated-paredit.html">Animated Paredit</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">paredit</span>
  <span style="color: #8959a8;">:commands</span> (paredit-mode)
  <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc38fb77" class="outline-2">
<h2 id="orgc38fb77"><span class="section-number-2">13</span> Paxedit</h2>
<div class="outline-text-2" id="text-13">
<p>
Maybe even <i>more</i> power for lisp coding?
<a href="https://github.com/promethial/paxedit">Paxedit repo</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">paxedit</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:commands</span> (paxedit-mode)
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"M-&lt;right&gt;"</span> . paxedit-transpose-forward)
  (<span style="color: #3e999f;">"M-&lt;left&gt;"</span>  . paxedit-transpose-backward)
  (<span style="color: #3e999f;">"M-&lt;up&gt;"</span>    . paxedit-backward-up)
  (<span style="color: #3e999f;">"M-&lt;down&gt;"</span>  . paxedit-backward-end)
  (<span style="color: #3e999f;">"M-b"</span>       . paxedit-previous-symbol)
  (<span style="color: #3e999f;">"M-f"</span>       . paxedit-next-symbol)
  (<span style="color: #3e999f;">"C-%"</span>       . paxedit-copy)
  (<span style="color: #3e999f;">"C-&amp;"</span>       . paxedit-kill)
  (<span style="color: #3e999f;">"C-*"</span>       . paxedit-delete)
  (<span style="color: #3e999f;">"C-^"</span>       . paxedit-sexp-raise)
  (<span style="color: #3e999f;">"M-u"</span>       . paxedit-symbol-change-case)
  (<span style="color: #3e999f;">"C-@"</span>       . paxedit-symbol-copy)
  (<span style="color: #3e999f;">"C-#"</span>       . paxedit-symbol-kill))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6fd325" class="outline-2">
<h2 id="orga6fd325"><span class="section-number-2">14</span> Projectile</h2>
<div class="outline-text-2" id="text-14">
<p>
Handling project buffers and files may be easier with projectile.
Currently under evaluation.
</p>

<p>
From the <a href="https://github.com/abo-abo/hydra/wiki/Projectile">Hydra Wiki</a>, the additional hydras launch the projectile
functions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">projectile</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"C-x w"</span> . hydra-projectile-other-window/body)
  (<span style="color: #3e999f;">"C-c C-p"</span> . hydra-projectile/body)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">when</span> (eq system-type 'windows-nt)
    (<span style="color: #718c00;">setq</span> projectile-indexing-method 'native))
  (<span style="color: #718c00;">setq</span> projectile-enable-caching t
        projectile-require-project-root t)
  (projectile-global-mode)
  (<span style="color: #718c00;">defhydra</span> hydra-projectile-other-window (<span style="color: #8959a8;">:color</span> teal)
              <span style="color: #3e999f;">"projectile-other-window"</span>
              (<span style="color: #3e999f;">"f"</span>  projectile-find-file-other-window        <span style="color: #3e999f;">"file"</span>)
              (<span style="color: #3e999f;">"g"</span>  projectile-find-file-dwim-other-window   <span style="color: #3e999f;">"file dwim"</span>)
              (<span style="color: #3e999f;">"d"</span>  projectile-find-dir-other-window         <span style="color: #3e999f;">"dir"</span>)
              (<span style="color: #3e999f;">"b"</span>  projectile-switch-to-buffer-other-window <span style="color: #3e999f;">"buffer"</span>)
              (<span style="color: #3e999f;">"q"</span>  nil                                      <span style="color: #3e999f;">"cancel"</span> <span style="color: #8959a8;">:color</span> blue))
  (<span style="color: #718c00;">defhydra</span> hydra-projectile (<span style="color: #8959a8;">:color</span> teal <span style="color: #8959a8;">:hint</span> nil)
              <span style="color: #3e999f;">"</span>
<span style="color: #3e999f;">     PROJECTILE: %(projectile-project-root)</span>

<span style="color: #3e999f;">     Find File            Search/Tags          Buffers                Cache</span>
<span style="color: #3e999f;">------------------------------------------------------------------------------------------</span>
<span style="color: #3e999f;">_C-f_: file            _a_: ag                _i_: Ibuffer           _c_: cache clear</span>
<span style="color: #3e999f;"> _ff_: file dwim       _g_: update gtags      _b_: switch to buffer  _x_: remove known project</span>
<span style="color: #3e999f;"> _fd_: file curr dir   _o_: multi-occur     _C-k_: Kill all buffers  _X_: cleanup non-existing</span>
<span style="color: #3e999f;">  _r_: recent file                                               ^^^^_z_: cache current</span>
<span style="color: #3e999f;">  _d_: dir</span>

<span style="color: #3e999f;">"</span>
              (<span style="color: #3e999f;">"a"</span>   projectile-ag)
              (<span style="color: #3e999f;">"b"</span>   projectile-switch-to-buffer)
              (<span style="color: #3e999f;">"c"</span>   projectile-invalidate-cache)
              (<span style="color: #3e999f;">"d"</span>   projectile-find-dir)
              (<span style="color: #3e999f;">"C-f"</span> projectile-find-file)
              (<span style="color: #3e999f;">"ff"</span>  projectile-find-file-dwim)
              (<span style="color: #3e999f;">"fd"</span>  projectile-find-file-in-directory)
              (<span style="color: #3e999f;">"g"</span>   ggtags-update-tags)
              (<span style="color: #3e999f;">"C-g"</span> ggtags-update-tags)
              (<span style="color: #3e999f;">"i"</span>   projectile-ibuffer)
              (<span style="color: #3e999f;">"K"</span>   projectile-kill-buffers)
              (<span style="color: #3e999f;">"C-k"</span> projectile-kill-buffers)
              (<span style="color: #3e999f;">"m"</span>   projectile-multi-occur)
              (<span style="color: #3e999f;">"o"</span>   projectile-multi-occur)
              (<span style="color: #3e999f;">"C-p"</span> projectile-switch-project <span style="color: #3e999f;">"switch project"</span>)
              (<span style="color: #3e999f;">"p"</span>   projectile-switch-project)
              (<span style="color: #3e999f;">"s"</span>   projectile-switch-project)
              (<span style="color: #3e999f;">"r"</span>   projectile-recentf)
              (<span style="color: #3e999f;">"x"</span>   projectile-remove-known-project)
              (<span style="color: #3e999f;">"X"</span>   projectile-cleanup-known-projects)
              (<span style="color: #3e999f;">"z"</span>   projectile-cache-current-file)
              (<span style="color: #3e999f;">"`"</span>   hydra-projectile-other-window/body <span style="color: #3e999f;">"other window"</span>)
              (<span style="color: #3e999f;">"q"</span>   nil <span style="color: #3e999f;">"cancel"</span> <span style="color: #8959a8;">:color</span> blue)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb7122c" class="outline-2">
<h2 id="orgcb7122c"><span class="section-number-2">15</span> Programming Languages</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-org1710d3e" class="outline-3">
<h3 id="org1710d3e"><span class="section-number-3">15.1</span> Rust</h3>
<div class="outline-text-3" id="text-15-1">
<p>
These initial settings are copied from the <a href="https://github.com/syl20bnr/spacemacs/blob/master/layers/+lang/rust/packages.el">spacemacs rust layer</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">cargo</span>
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.rs"</span>
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">bind-keys</span> <span style="color: #8959a8;">:prefix-map</span> cargo-mode-map
             <span style="color: #8959a8;">:prefix</span> <span style="color: #3e999f;">"C-c c"</span>
             (<span style="color: #3e999f;">"C"</span> . cargo-process-repeat)
             (<span style="color: #3e999f;">"."</span> . cargo-process-repeat)
             (<span style="color: #3e999f;">"X"</span> . cargo-run-example)
             (<span style="color: #3e999f;">"c"</span> . cargo-process-build)
             (<span style="color: #3e999f;">"d"</span> . cargo-process-doc)
             (<span style="color: #3e999f;">"e"</span> . cargo-process-bench)
             (<span style="color: #3e999f;">"R"</span> . cargo-process-current-test)
             (<span style="color: #3e999f;">"f"</span> . cargo-process-fmt)
             (<span style="color: #3e999f;">"i"</span> . cargo-process-init)
             (<span style="color: #3e999f;">"n"</span> . cargo-process-new)
             (<span style="color: #3e999f;">"o"</span> . cargo-process-current-file-tests)
             (<span style="color: #3e999f;">"s"</span> . cargo-process-search)
             (<span style="color: #3e999f;">"u"</span> . cargo-process-update)
             (<span style="color: #3e999f;">"x"</span> . cargo-process-run)
             (<span style="color: #3e999f;">"t"</span> . cargo-process-test)
             (<span style="color: #3e999f;">"R"</span> . cargo-process-test-regexp)))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">racer</span>
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.rs"</span>)

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">flycheck-rust</span>
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.rs"</span>
  <span style="color: #8959a8;">:init</span>
  (add-hook 'flycheck-mode-hook #'flycheck-rust-setup))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ggtags</span>
  <span style="color: #8959a8;">:defer</span> t)

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">html-gtags</span>
  <span style="color: #8959a8;">:defer</span> t)

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">racer-mode</span>
  <span style="color: #8959a8;">:init</span>
  (add-hook 'racer-mode-hook #'eldoc-mode)
  (add-hook 'racer-mode-hook #'company-mode))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">company-racer</span>
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">with-eval-after-load</span> 'company
    (add-to-list 'company-backends 'company-racer)))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">rust-mode</span>
  <span style="color: #8959a8;">:commands</span> (cargo-minor-mode)
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.rs"</span>
  <span style="color: #8959a8;">:bind</span>  (<span style="color: #3e999f;">"C-c &lt;tab&gt;"</span> . rust-format-buffer)
  (<span style="color: #3e999f;">"TAB"</span> . company-indent-or-complete-common)
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">setq</span> company-tooltip-align-annotations t)
  (add-hook 'rust-mode-hook #'cargo-minor-mode)
  (add-hook 'rust-mode-hook #'racer-mode)
  (add-hook 'rust-mode-hook #'flycheck-mode)
  (add-hook 'rust-mode-hook #'electric-pair-mode))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">toml-mode</span>
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.toml\\'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3525fe9" class="outline-3">
<h3 id="org3525fe9"><span class="section-number-3">15.2</span> Clojure</h3>
<div class="outline-text-3" id="text-15-2">
<p>
The easiest way to edit clojure code is with <code>paredit</code> so let's have
it automatically load each time.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">clojure-mode</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:config</span>
  (add-hook 'clojure-mode-hook 'paredit-mode)
  (add-hook 'clojure-mode-hook 'cljr-clojure-mode-hook)
  (add-hook 'clojure-mode-hook 'paxedit-mode))
</pre>
</div>
</div>

<div id="outline-container-orgba61363" class="outline-4">
<h4 id="orgba61363"><span class="section-number-4">15.2.1</span> Cider</h4>
<div class="outline-text-4" id="text-15-2-1">
<p>
Using Cider will make a nREPL available for Clojure
programming. The configuration snippets here are from the <a href="https://github.com/clojure-emacs/cider">project
page on github</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">cider</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:commands</span> (cider-jack-in)
  <span style="color: #8959a8;">:config</span>
  <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Enable eldoc</span>
  (add-hook 'cider-mode-hook 'cider-turn-on-eldoc-mode)
  <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Hide special buffers</span>
  (<span style="color: #718c00;">setq</span> nrepl-hide-special-buffers t
  <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Stop the error from popping up while working in buffers other than the REPL</span>
        cider-popup-stacktraces nil
  <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Stop prompting to save file when killing repl buffer</span>
        cider-prompt-save-file-on-load nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-org20be614" class="outline-4">
<h4 id="org20be614"><span class="section-number-4">15.2.2</span> clj-refactor</h4>
<div class="outline-text-4" id="text-15-2-2">
<p>
Refactoring clojure code is made easier with <a href="https://github.com/clojure-emacs/clj-refactor.el">clj-refactor.el</a>.  I
turn it on for any clojure mode (through hooks).  The keybinding
for the set of commands is prefixed with <code>C-c C-r</code> as shown below.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">clj-refactor</span>
  <span style="color: #8959a8;">:commands</span> (cljr-clojure-mode-hook)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">cljr-clojure-mode-hook</span> ()
    (clj-refactor-mode 1)
    (yas-minor-mode 1)
    (cljr-add-keybindings-with-prefix <span style="color: #3e999f;">"C-c C-r"</span>)))
</pre>
</div>

<p>
The wiki hosts the <a href="https://github.com/clojure-emacs/clj-refactor.el/wiki">available refactorings</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-org2a14535" class="outline-3">
<h3 id="org2a14535"><span class="section-number-3">15.3</span> Elisp</h3>
<div class="outline-text-3" id="text-15-3">
<p>
When modified <code>emacs-lisp</code>, it is most helpful to use <code>paredit</code> and
<code>eldoc</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'emacs-lisp-mode-hook 'paredit-mode)
(add-hook 'emacs-lisp-mode-hook 'paxedit-mode)
(add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org668dc4c" class="outline-2">
<h2 id="org668dc4c"><span class="section-number-2">16</span> Ivy, Counsel and Swiper</h2>
<div class="outline-text-2" id="text-16">
<p>
Ivy is a completion framework somewhere between <code>ido</code> and <code>helm</code>. It
and <code>counsel</code> are in the <code>swiper</code> package.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">swiper</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span> (<span style="color: #3e999f;">"C-s"</span> . swiper)
  (<span style="color: #3e999f;">"C-c S"</span> . isearch-forward)
  (<span style="color: #3e999f;">"C-x C-r"</span> . counsel-recentf)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> ivy-display-style 'fancy
        ivy-use-virtual-buffers t
        ivy-re-builders-alist
        '((t . ivy--regex-fuzzy))
        colir-compose-method 'colir-compose-soft-light)
  (<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">smex</span>
   <span style="color: #8959a8;">:ensure</span> t
   <span style="color: #8959a8;">:config</span> (smex-initialize))
  (ivy-mode))
(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">counsel</span>
  <span style="color: #8959a8;">:ensure</span> t
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"M-x"</span>     . counsel-M-x)
  (<span style="color: #3e999f;">"H-y"</span>     . counsel-yank-pop)
  (<span style="color: #3e999f;">"C-x C-f"</span> . counsel-find-file)
  (<span style="color: #3e999f;">"C-c k"</span>   . counsel-ag)
  (<span style="color: #3e999f;">"&lt;F1&gt; f"</span>  . counsel-describe-function)
  (<span style="color: #3e999f;">"&lt;F1&gt; v"</span>  . counsel-describe-variable)
  (<span style="color: #3e999f;">"&lt;F1&gt; l"</span>  . counsel-find-library)
  (<span style="color: #3e999f;">"&lt;F2&gt; i"</span>  . counsel-info-lookup-symbol)
  (<span style="color: #3e999f;">"&lt;F2&gt; u"</span>  . counsel-unicode-char)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> counsel-find-file-at-point t
        enable-recursive-minibuffers t))

(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ivy-rich</span>
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">setq</span> ivy-virtual-abbreviate 'full
        ivy-rich-switch-buffer-align-virtual-buffer t)
  (ivy-set-display-transformer 'ivy-switch-buffer
                               'ivy-rich-switch-buffer-transformer))
</pre>
</div>

<p>
The bindings introduced are replacements for built-in
commands. <code>counsel-M-x</code> becomes my default <code>M-x</code> binding with <code>smex</code>
ordering the results smartly.  I also enable it to try to find the
file at point if applicable.
</p>

<p>
The searching functionality of <code>C-x</code> advances with <code>swiper</code> showing
search with context, navigation and matching portions.
</p>

<p>
The remaining settings and binding relate to <code>ivy</code> itself.  This
library does the actual listing of completion items. I bind the
<code>ivy-recentf</code> interface to find recently used files.
</p>

<p>
For <code>ivy</code>'s look and feel, I make a few settings.  First, the
display style is set to <i>fancy</i>.  This shows the matching portions
of the candidates.  I also alter <code>colir-compose-method</code> to a better
colorizing scheme for my preferred themes. Next, I instruct <code>ivy</code> to
use virtual buffers (recentf, bookmarks) when switching buffers.
Finally, I enable fuzzy matching of the input.
</p>
</div>

<div id="outline-container-org23503c2" class="outline-3">
<h3 id="org23503c2"><span class="section-number-3">16.1</span> Smex</h3>
<div class="outline-text-3" id="text-16-1">
<p>
Counsel can use <code>smex</code> under the hood for <i>recent-item</i>
sorting. This give a better LRU functionality to command
selection. Naturally, I enabled it above.
</p>
</div>
</div>
</div>

<div id="outline-container-orgbe379b8" class="outline-2">
<h2 id="orgbe379b8"><span class="section-number-2">17</span> IDO (Interactively Do Things)</h2>
<div class="outline-text-2" id="text-17">
<p>
First, I start with some basic IDO settings. I enabled it
everywhere so that it will work in all contexts. I like flex
matching so I also turn that feature on. Finally, I order the file
extensions to my liking and enable the mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8e908c; font-style: italic;">;</span><span style="color: #8e908c; font-style: italic;">(setq ido-everywhere t)</span>
(<span style="color: #718c00;">setq</span> ido-enable-flex-matching t)
<span style="color: #8e908c; font-style: italic;">; </span><span style="color: #8e908c; font-style: italic;">Do not ask to create a new buffer -- just do it.</span>
(<span style="color: #718c00;">setq</span> ido-create-new-buffer 'always)
<span style="color: #8e908c; font-style: italic;">; </span><span style="color: #8e908c; font-style: italic;">Try to guess if point is at a filename</span>
(<span style="color: #718c00;">setq</span> ido-use-filename-at-point 'guess)
<span style="color: #8e908c; font-style: italic;">; </span><span style="color: #8e908c; font-style: italic;">Set extension ordering</span>
(<span style="color: #718c00;">setq</span> ido-file-extensions-order '(<span style="color: #3e999f;">".org"</span> <span style="color: #3e999f;">".tex"</span> <span style="color: #3e999f;">".el"</span> <span style="color: #3e999f;">".txt"</span> <span style="color: #3e999f;">".c"</span> <span style="color: #3e999f;">".cpp"</span> <span style="color: #3e999f;">".h"</span> <span style="color: #3e999f;">".clj"</span>))
<span style="color: #8e908c; font-style: italic;">; </span><span style="color: #8e908c; font-style: italic;">Enable mode</span>
<span style="color: #8e908c; font-style: italic;">; </span><span style="color: #8e908c; font-style: italic;">(ido-mode t)</span>
</pre>
</div>
</div>

<div id="outline-container-org98a0626" class="outline-3">
<h3 id="org98a0626"><span class="section-number-3">17.1</span> Keystrokes</h3>
<div class="outline-text-3" id="text-17-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keystroke</th>
<th scope="col" class="org-left">Operates on</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-b</td>
<td class="org-left">Buffers</td>
<td class="org-left">Reverts to the old switch-buffer</td>
</tr>

<tr>
<td class="org-left">C-f</td>
<td class="org-left">Files</td>
<td class="org-left">Reverts to the old find-file</td>
</tr>

<tr>
<td class="org-left">C-d</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Opens a dired buffer in current dir</td>
</tr>

<tr>
<td class="org-left">C-a</td>
<td class="org-left">Files/Buffers</td>
<td class="org-left">Toggles showing ignored files</td>
</tr>

<tr>
<td class="org-left">C-c</td>
<td class="org-left">Buffers/Dirs/Files</td>
<td class="org-left">Toggles ignore case for names</td>
</tr>

<tr>
<td class="org-left">TAB</td>
<td class="org-left">Buffers/Dirs/Files</td>
<td class="org-left">Attempt to complete input</td>
</tr>

<tr>
<td class="org-left">C-p</td>
<td class="org-left">Files</td>
<td class="org-left">Toggles prefix matching</td>
</tr>

<tr>
<td class="org-left">C-s/C-r</td>
<td class="org-left">All</td>
<td class="org-left">Moves to next/previous match</td>
</tr>

<tr>
<td class="org-left">C-t</td>
<td class="org-left">All</td>
<td class="org-left">Toggles matching Emacs Regexp</td>
</tr>

<tr>
<td class="org-left">Backspace</td>
<td class="org-left">All</td>
<td class="org-left">Deletes chars or up directory</td>
</tr>

<tr>
<td class="org-left">C-SPC/C-@</td>
<td class="org-left">All</td>
<td class="org-left">Restricts completion list</td>
</tr>

<tr>
<td class="org-left">//</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Ignore preceding path</td>
</tr>

<tr>
<td class="org-left">~/</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Jump to home directory</td>
</tr>

<tr>
<td class="org-left">M-d</td>
<td class="org-left">Files</td>
<td class="org-left">Searches for input in cwd sub-dirs</td>
</tr>

<tr>
<td class="org-left">C-k</td>
<td class="org-left">Buffers/Files</td>
<td class="org-left">Kills focused buffer or deletes file</td>
</tr>

<tr>
<td class="org-left">M-m</td>
<td class="org-left">Files</td>
<td class="org-left">Creates a new sub-dir to cwd</td>
</tr>

<tr>
<td class="org-left">M-n/M-p</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Cycles through next/previous work dirs</td>
</tr>

<tr>
<td class="org-left">M-k</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Kills active work dir from list</td>
</tr>

<tr>
<td class="org-left">M-s M-s</td>
<td class="org-left">Dirs/Files</td>
<td class="org-left">Search list of work dirs for input</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orga53baee" class="outline-2">
<h2 id="orga53baee"><span class="section-number-2">18</span> Shells</h2>
<div class="outline-text-2" id="text-18">
<p>
There are two useful shells in emacs: <code>eshell</code> and
<code>ansi-term</code>.
</p>
</div>

<div id="outline-container-org4c92992" class="outline-3">
<h3 id="org4c92992"><span class="section-number-3">18.1</span> Ansi Term</h3>
<div class="outline-text-3" id="text-18-1">
<p>
Some of the following settings were stolen from <a href="https://ogbe.net/emacsconfig.html">https://ogbe.net/emacsconfig.html</a>.
</p>

<p>
These settings close <code>ansi-term</code> when I exit the shell. They also
default to just launching <code>zsh</code> instead of asking me
(preferred). Then it closes by setting up a hook to ensure some
nice functionality in the terminal mode window.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defadvice</span> <span style="color: #f5871f;">term-sentinel</span> (around bnb/advise-term-sentinel (proc msg))
  (<span style="color: #718c00;">if</span> (memq (process-status proc) '(<span style="color: #c82829; font-weight: bold;">signal</span> exit))
      (<span style="color: #718c00;">let</span> ((buffer (process-buffer proc)))
        ad-do-it
        (kill-buffer buffer))
    ad-do-it))
(ad-activate 'term-sentinel)

(<span style="color: #718c00;">defadvice</span> <span style="color: #f5871f;">ansi-term</span> (before force-zsh)
  (<span style="color: #718c00;">interactive</span> (list <span style="color: #3e999f;">"/bin/zsh"</span>)))
(ad-activate 'ansi-term)

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/term-mode-hook</span> ()
  (goto-address-mode)
  (<span style="color: #718c00;">setq-local</span> term-buffer-maximum-size 10000))

(add-hook 'term-mode-hook 'bnb/term-mode-hook)

(<span style="color: #718c00;">defalias</span> '<span style="color: #f5871f;">zsh</span> 'ansi-term)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6945198" class="outline-3">
<h3 id="org6945198"><span class="section-number-3">18.2</span> Eshell</h3>
<div class="outline-text-3" id="text-18-2">
<p>
Built-in Eshell can provide a shell that works the same on windows or
GNU/Linux. One of the really cool features is that you can define
commands to use (like aliases) within the shell and have them
directly integrate with emacs.
</p>
</div>

<div id="outline-container-org87d83b5" class="outline-4">
<h4 id="org87d83b5"><span class="section-number-4">18.2.1</span> Eshell Settings</h4>
<div class="outline-text-4" id="text-18-2-1">
<p>
Turn off any <code>$PAGER</code> settings inherited in the
environment. Because this is running in Emacs, there is no need
for a pager.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setenv <span style="color: #3e999f;">"PAGER"</span> <span style="color: #3e999f;">"cat"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3434e69" class="outline-4">
<h4 id="org3434e69"><span class="section-number-4">18.2.2</span> Eshell Commands</h4>
<div class="outline-text-4" id="text-18-2-2">
<p>
Fast fingers are used to typing <code>emacs</code> at a prompt to open a
file.  This gives the same behavior in <code>eshell</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/emacs</span> (<span style="color: #4271ae;">&amp;rest</span> args)
  <span style="color: #8959a8;">"Open a file in emacs the natural way"</span>
  (<span style="color: #718c00;">if</span> (null args)
      <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">If emacs is called by itself, then just go to emacs directly</span>
      (bury-buffer)
    <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">If opening multiple files with a directory name, e.g.</span>
    <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">&gt; emacs bar/bar.txt foo.txt</span>
    <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">then the names must be expanded to complete file paths.</span>
    <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Otherwise, find-file will look in the current directory which</span>
    <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">would fail for 'foo.txt' in the example above.</span>
    (mapc #'find-file (mapcar #'expand-file-name (eshell-flatten-list (reverse args))))))
</pre>
</div>

<p>
One can also keep the shell active and open files in the other
window.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/emo</span> (<span style="color: #4271ae;">&amp;rest</span> args)
  (mapc
     (<span style="color: #718c00;">lambda</span> (f)
       (<span style="color: #718c00;">save-selected-window</span>
         (find-file-other-window f)))
     (mapcar #'expand-file-name (eshell-flatten-list (reverse args)))))
</pre>
</div>

<p>
I also setup some command aliases. Here, I create a long listing,
<code>ll</code>, alias for <code>ls</code>, a <code>llc</code> varient with colored output, and an
emacs shortcut.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">with-eval-after-load</span> <span style="color: #3e999f;">"em-alias"</span>
  '(<span style="color: #718c00;">progn</span>
     (eshell/alias <span style="color: #3e999f;">"em"</span> <span style="color: #3e999f;">"emacs"</span>)
     (eshell/alias <span style="color: #3e999f;">"ll"</span> <span style="color: #3e999f;">"ls -Aloh"</span>)
     (eshell/alias <span style="color: #3e999f;">"llc"</span> <span style="color: #3e999f;">"*ls -AlohG --color=always"</span>)))
</pre>
</div>

<p>
On a windows box, setup grep to be a cygwin version.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">when</span> (eq system-type 'windows-nt)
  (<span style="color: #718c00;">with-eval-after-load</span> <span style="color: #3e999f;">"eshell"</span>
    (<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/grep</span> (<span style="color: #4271ae;">&amp;rest</span> args)
      (eshell-grep <span style="color: #3e999f;">"c:/cygwin/bin/grep.exe"</span> args t))))
</pre>
</div>


<p>
For Magit, there are some niceties to add.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/gst</span> (<span style="color: #4271ae;">&amp;rest</span> args)
  (magit-status (<span style="color: #718c00;">pop</span> args) nil)
  (eshell/echo))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/gd</span> (<span style="color: #4271ae;">&amp;rest</span> args)
  (magit-diff-unstaged)
  (eshell/echo))

(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">eshell/gds</span> (<span style="color: #4271ae;">&amp;rest</span> args)
  (magit-diff-staged)
  (eshell/echo))
</pre>
</div>
</div>
</div>


<div id="outline-container-org3a6cd0b" class="outline-4">
<h4 id="org3a6cd0b"><span class="section-number-4">18.2.3</span> Plan 9 Smart Shells</h4>
<div class="outline-text-4" id="text-18-2-3">
<p>
See <a href="http://www.masteringemacs.org/article/complete-guide-mastering-eshell">the complete guide to mastering Eshell</a> for more on this.
Basically, the cursor stays on the command for editing if
necessary.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">eshell</span>)
(<span style="color: #718c00;">require</span> '<span style="color: #4271ae;">em-smart</span>)

(<span style="color: #718c00;">setq</span> eshell-where-to-jump 'begin)
(<span style="color: #718c00;">setq</span> eshell-review-quick-commands nil)
(<span style="color: #718c00;">setq</span> eshell-smart-space-goes-to-end t)
(add-hook  'eshell-mode-hook 'eshell-smart-initialize)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc99a043" class="outline-2">
<h2 id="orgc99a043"><span class="section-number-2">19</span> AucTeX</h2>
<div class="outline-text-2" id="text-19">
<p>
<a href="AUCTeX.html#Top">AUCTeX Manual</a>
</p>

<p>
Superb handling of TeX documents.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">tex-site</span>
  <span style="color: #8959a8;">:ensure</span> auctex
  <span style="color: #8959a8;">:config</span>
  (add-hook 'LaTeX-mode-hook 'flyspell-mode)
  (add-hook 'LaTeX-mode-hook 'LaTeX-math-mode)
  (add-hook 'LaTeX-mode-hook 'auto-fill-mode)
  (add-hook 'LaTeX-mode-hook 'orgtbl-mode)
  (<span style="color: #718c00;">setq</span> TeX-auto-untabify t
        TeX-auto-save t
        TeX-save-query nil
        TeX-parse-self t
        TeX-output-view-style
        (<span style="color: #718c00;">if</span> (eq system-type 'windows-nt)
            (<span style="color: #718c00;">quote</span>
             ((<span style="color: #3e999f;">"^pdf$"</span> <span style="color: #3e999f;">"."</span> <span style="color: #3e999f;">"SumatraPDF.exe -reuse-instance %o"</span>)
              (<span style="color: #3e999f;">"^html?$"</span> <span style="color: #3e999f;">"."</span> <span style="color: #3e999f;">"start %o"</span>)))
          (<span style="color: #718c00;">quote</span>
           ((<span style="color: #3e999f;">"^pdf$"</span> <span style="color: #3e999f;">"."</span> <span style="color: #3e999f;">"evince -f %o"</span>)
            (<span style="color: #3e999f;">"^html?$"</span> <span style="color: #3e999f;">"."</span> <span style="color: #3e999f;">"start %o"</span>))))
        TeX-PDF-mode 1
        TeX-engine 'xetex)
  (<span style="color: #718c00;">setq-default</span> TeX-master nil)
  (add-to-list 'org-latex-packages-alist
               '(<span style="color: #3e999f;">""</span> <span style="color: #3e999f;">"tikz"</span> t))
  (<span style="color: #718c00;">setq</span> org-latex-create-formula-image-program 'imagemagick)
  (eval-after-load <span style="color: #3e999f;">"preview"</span>
    '(add-to-list 'preview-default-preamble <span style="color: #3e999f;">"\\PreviewEnvironment{tikzpicture}"</span> t))
  (add-hook 'doc-view-mode-hook 'auto-revert-mode))
</pre>
</div>
</div>

<div id="outline-container-orgee5bc11" class="outline-3">
<h3 id="orgee5bc11"><span class="section-number-3">19.1</span> RefTeX</h3>
<div class="outline-text-3" id="text-19-1">
<p>
<a href="RefTeX.html#Top">RefTeX Manual</a>
</p>

<p>
RefTeX provides navigation, easy references, easy citations and
integrates well into AUCTeX.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'LaTeX-mode-hook 'turn-on-reftex)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keystroke</th>
<th scope="col" class="org-left">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-c =</td>
<td class="org-left">Show TOC and jump to sections</td>
</tr>

<tr>
<td class="org-left">C-c (</td>
<td class="org-left">Insert a label</td>
</tr>

<tr>
<td class="org-left">C-c )</td>
<td class="org-left">Reference a label</td>
</tr>

<tr>
<td class="org-left">C-c [</td>
<td class="org-left">Insert a citation (from BibTex db)</td>
</tr>

<tr>
<td class="org-left">C-c &lt;</td>
<td class="org-left">Index entry</td>
</tr>

<tr>
<td class="org-left">C-c &gt;</td>
<td class="org-left">View index</td>
</tr>

<tr>
<td class="org-left">C-c &amp;</td>
<td class="org-left">View crossref</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org793967e" class="outline-3">
<h3 id="org793967e"><span class="section-number-3">19.2</span> TeX Settings</h3>
<div class="outline-text-3" id="text-19-2">
<p>
Here are some nice features to have enabled.  Parse-self and
auto-save will parse the file on load and save
respectively. Untabify will remove tabs (real ones) before saving.
</p>

<p>
I also have a default of <code>TeX-master</code> set to <code>nil</code>. I used to have
it set to "master" as recommended in the documentation, but I had
bad results for LaTeX files generated on the fly.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"></pre>
</div>

<p>
For viewing the output, I can specify the command to use on the
files generated in the process. However, the programs differ on
GNU/Linux and Windows, so I have differing settings below.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"></pre>
</div>
</div>
</div>

<div id="outline-container-org4070477" class="outline-3">
<h3 id="org4070477"><span class="section-number-3">19.3</span> XeTeX settings</h3>
<div class="outline-text-3" id="text-19-3">
<p>
To get more beautiful fonts, I use the XeTeX processor. I also
use this in PDF mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"></pre>
</div>
</div>
</div>

<div id="outline-container-org7870f69" class="outline-3">
<h3 id="org7870f69"><span class="section-number-3">19.4</span> DocView</h3>
<div class="outline-text-3" id="text-19-4">
<p>
Have <code>docview</code> automatically revert the buffer.
</p>
</div>
</div>
</div>

<div id="outline-container-orge681625" class="outline-2">
<h2 id="orge681625"><span class="section-number-2">20</span> Orgmode</h2>
<div class="outline-text-2" id="text-20">
<p>
The one feature I cannot do without. Let's set up some basics.
</p>
</div>


<div id="outline-container-org2bd3224" class="outline-3">
<h3 id="org2bd3224"><span class="section-number-3">20.1</span> Orgmode Initialization</h3>
<div class="outline-text-3" id="text-20-1">
<p>
Here are the initial settings that will invoke org-mode or need to
be set when it is loaded.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">org-mode</span>
  <span style="color: #8959a8;">:ensure</span> org-plus-contrib
  <span style="color: #8959a8;">:mode</span> <span style="color: #3e999f;">"\\.org</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">(</span><span style="color: #3e999f;">.gpg|_archive</span><span style="color: #eab700;">\\</span><span style="color: #8959a8;">)</span><span style="color: #3e999f;">?$"</span>
  <span style="color: #8959a8;">:bind</span>
  (<span style="color: #3e999f;">"C-c t"</span>  . orgtbl-mode)
  (<span style="color: #3e999f;">"C-c l"</span>  . org-store-link)
  (<span style="color: #3e999f;">"C-c r"</span>  . org-capture)
  (<span style="color: #3e999f;">"C-c b"</span>  . org-iswitchb)
  (<span style="color: #3e999f;">"&lt;f12&gt;"</span>  . org-agenda)
  (<span style="color: #3e999f;">"H-z"</span>    . org-agenda)
  (<span style="color: #3e999f;">"&lt;apps&gt;"</span> . org-agenda)
  (<span style="color: #3e999f;">"&lt;f9&gt; v"</span> . visible-mode)
  (<span style="color: #3e999f;">"&lt;f9&gt; g"</span> . org-clock-goto)
  (<span style="color: #3e999f;">"&lt;f9&gt; i"</span> . org-clock-in)
  (<span style="color: #3e999f;">"&lt;f9&gt; o"</span> . org-clock-out)
  <span style="color: #8959a8;">:config</span>
  (<span style="color: #718c00;">bind-key</span> <span style="color: #3e999f;">"M-i"</span> 'org-toggle-inline-images org-mode-map)
  (add-hook 'org-babel-after-execute-hook
            (<span style="color: #718c00;">lambda</span> () (org-display-inline-images nil t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c6fdff" class="outline-3">
<h3 id="org3c6fdff"><span class="section-number-3">20.2</span> Auto mode</h3>
<div class="outline-text-3" id="text-20-2">
<p>
I add gpg and _archive to the list of known org files. These two
alternative extensions are for either encrypted org files
(<code>.org.gpg</code>) or for archives (<code>.org_archive</code>).
</p>

<p>
This mode is set above with <code>use-package</code>.
</p>
</div>
</div>

<div id="outline-container-orgc50038e" class="outline-3">
<h3 id="orgc50038e"><span class="section-number-3">20.3</span> Hooks</h3>
<div class="outline-text-3" id="text-20-3">
<p>
There are three hooks to consider. These are initialized in <a href="#org2bd3224">20.1</a>. First, I add in a keystroke to toggle the inline
images.
</p>

<p>
The next hook just saves the org files opened before exiting
emacs &#x2013; just in case.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'bnb/kill-emacs-hooks 'org-save-all-org-buffers 'append)
</pre>
</div>

<p>
The final hook shows images automatically. When I execute <code>babel</code>
to get graphs from my work logs, I hate having to toggle the inline
images on/off again.  Here is a hook from Rick Frankel to save the
day.
</p>
</div>
</div>

<div id="outline-container-org90d5ec0" class="outline-3">
<h3 id="org90d5ec0"><span class="section-number-3">20.4</span> Keys</h3>
<div class="outline-text-3" id="text-20-4">
</div><div id="outline-container-orgde9bdc9" class="outline-4">
<h4 id="orgde9bdc9"><span class="section-number-4">20.4.1</span> Global</h4>
<div class="outline-text-4" id="text-20-4-1">
<p>
Some org-mode features are so useful that I need to have them be
available globally.
</p>

<ul class="org-ul">
<li>orgtbl-mode
Use orgtbl in other modes</li>
<li>org-store-link
Store a link (context-aware) to the current location</li>
<li>org-agenda
Launch the agenda</li>
<li>org-capture
Capture a task/note</li>
<li>org-iswitchb
Switch org buffers</li>
<li>visible-mode
Show the file as-is (no special org handling)</li>
<li>org-clock-in/org-clock-out
Clock in/out of current subtree</li>
<li>org-clock-goto
Go to current/previous clocked task</li>
</ul>

<p>
These are defined in <a href="#org2bd3224">20.1</a>
</p>
</div>
</div>

<div id="outline-container-orgac32c42" class="outline-4">
<h4 id="orgac32c42"><span class="section-number-4">20.4.2</span> Speed</h4>
<div class="outline-text-4" id="text-20-4-2">
<p>
Using org-mode efficiently for task management is best done with
speed keys. This are in effect when the cursor is on the first <code>*</code>
of a headline. And they come with an easy cheat-sheet by typing
<code>?</code>. I enable this feature and add some of my own commands.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-use-speed-commands t
      org-speed-commands-user
      (<span style="color: #718c00;">quote</span> ((<span style="color: #3e999f;">"0"</span> . delete-window)
              (<span style="color: #3e999f;">"1"</span> . delete-other-windows)
              (<span style="color: #3e999f;">"2"</span> . split-window-vertically)
              (<span style="color: #3e999f;">"3"</span> . split-window-horizontally)
              (<span style="color: #3e999f;">"h"</span> . hide-other)
              (<span style="color: #3e999f;">"s"</span> . org-save-all-org-buffers)
              (<span style="color: #3e999f;">"z"</span> . org-add-note)
              (<span style="color: #3e999f;">"N"</span> . org-narrow-to-subtree)
              (<span style="color: #3e999f;">"W"</span> . widen))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7d8daa8" class="outline-3">
<h3 id="org7d8daa8"><span class="section-number-3">20.5</span> Org TODO Configuration</h3>
<div class="outline-text-3" id="text-20-5">
<p>
This is the meat of what Org can do. Keeping track of todo items
with due dates, tags, etc. is really powerful. And I get to
customize it to suit my needs and my workflow.
</p>
</div>

<div id="outline-container-orgf3eddb9" class="outline-4">
<h4 id="orgf3eddb9"><span class="section-number-4">20.5.1</span> Keywords</h4>
<div class="outline-text-4" id="text-20-5-1">
<p>
The keywords that org uses in the headlines exist as sequences
describing the state changes. The characters in <code>()</code> also allow
fast access to these states described <a href="http://www.gnu.org/software/emacs/manual/html_mono/org.html#Fast-access-to-TODO-states">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-todo-keywords
      (<span style="color: #718c00;">quote</span> ((sequence <span style="color: #3e999f;">"TODO(t)"</span> <span style="color: #3e999f;">"NEXT(n)"</span> <span style="color: #3e999f;">"|"</span> <span style="color: #3e999f;">"DONE(d!/!)"</span>)
          (sequence <span style="color: #3e999f;">"WAITING(w@/!)"</span> <span style="color: #3e999f;">"SOMEDAY(s!)"</span> <span style="color: #3e999f;">"|"</span> <span style="color: #3e999f;">"CANCELED(c@/!)"</span>)
          (sequence <span style="color: #3e999f;">"OPEN(O)"</span> <span style="color: #3e999f;">"|"</span> <span style="color: #3e999f;">"CLOSED(C)"</span>))))
</pre>
</div>

<p>
I used to set <a href="(describe-variable 'org-todo-keyword-faces)">org-todo-keyword-faces</a>, but now I rely on theme
settings.
</p>
</div>
</div>

<div id="outline-container-org7df4e52" class="outline-4">
<h4 id="org7df4e52"><span class="section-number-4">20.5.2</span> Tags</h4>
<div class="outline-text-4" id="text-20-5-2">
<p>
Org uses tags on headlines for organization. I don't currently
use them much. I organize mainly by file with a file tag
specified via <a href="http://www.gnu.org/software/emacs/manual/html_mono/org.html#In_002dbuffer-settings">in-buffer settings</a> (<code>#+FILETAGS</code>).
</p>

<p>
However, a global tag list provides a selection list for the
tagging interface. I use 'project' as my tag to easily
differentiate simple tasks from more complex ones.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-tag-alist '((<span style="color: #3e999f;">"PROJECT"</span> . ?p)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org740e7ca" class="outline-4">
<h4 id="org740e7ca"><span class="section-number-4">20.5.3</span> Mechanics</h4>
<div class="outline-text-4" id="text-20-5-3">
<p>
The todo interface allows easy selection of states and triggers
on certain states to store notes.
</p>

<p>
Instead of cycling through states (and possibly triggering log
entries), I prefer fast entry to jump right to the correct
state. I also turn off the S-cursor transitions as state
changes to avoid the logging prompts.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-use-fast-todo-selection t)
(<span style="color: #718c00;">setq</span> org-treat-S-cursor-todo-selection-as-state-change nil)
</pre>
</div>

<p>
Upon changing the state of todo items, I can automatically
add/remove tags with the following list. It's a bit lispy, but
describes what happens upon entry in the specified state. The
state named as a string has tuples of tags and flags. 't'
indicates to set the flag, empty means to remove it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-todo-state-tags-triggers
      (<span style="color: #718c00;">quote</span> ((<span style="color: #3e999f;">"CANCELED"</span>
               (<span style="color: #3e999f;">"CANCELED"</span> . t))
              (<span style="color: #3e999f;">"WAITING"</span>
               (<span style="color: #3e999f;">"WAITING"</span> . t))
              (<span style="color: #3e999f;">"SOMEDAY"</span>
               (<span style="color: #3e999f;">"SOMEDAY"</span> . t))
              (done
               (<span style="color: #3e999f;">"WAITING"</span>))
              (<span style="color: #3e999f;">"TODO"</span>
               (<span style="color: #3e999f;">"WAITING"</span>)
               (<span style="color: #3e999f;">"CANCELED"</span>))
              (<span style="color: #3e999f;">"NEXT"</span>
               (<span style="color: #3e999f;">"WAITING"</span>))
              (<span style="color: #3e999f;">"DONE"</span>
               (<span style="color: #3e999f;">"WAITING"</span>)
               (<span style="color: #3e999f;">"CANCELED"</span>)))))
</pre>
</div>

<p>
Along with tags and states are priorities. I do not use task
priorities myself so I turn them off.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-enable-priority-commands nil)
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="org3a6fc5c"></a>Logging<br /><div class="outline-text-5" id="text-20-5-3-1">
<p>
Org allows logging of states. I turn this on to prompt myself
for reasons behind specific state changes. There is also a
setting to set a different drawer for clocking and logs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-log-done (<span style="color: #718c00;">quote</span> note)
      org-log-into-drawer t
      org-drawers '(<span style="color: #3e999f;">"PROPERTIES"</span> <span style="color: #3e999f;">"LOGBOOK"</span> <span style="color: #3e999f;">"CLOCK"</span>))
</pre>
</div>
</div></li>

<li><a id="org3c21b8e"></a>Sub-tasks<br /><div class="outline-text-5" id="text-20-5-3-2">
<p>
Naturally, some tasks are projects composed of smaller
sub-tasks. Org allows for this as well. I like to enforce the
dependencies of regular todo items and plain checkbox
lists. In this way, the overall item cannot change to done
without the completion of the sub-tasks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-enforce-todo-checkbox-dependencies t
      org-enforce-todo-dependencies t)
</pre>
</div>

<p>
Because of the previous enforcement of state, I can also
automatically infer when a parent state is complete. The
following code marks the parent complete once the sub-tasks
are all done.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">org-summary-todo</span> (n-done n-not-done)
  <span style="color: #8959a8;">"Switch entry to DONE when all sub-entries are done, to TODO otherwise."</span>
  (<span style="color: #718c00;">let</span> (org-log-done org-log-states)
    (org-todo (<span style="color: #718c00;">if</span> (= n-not-done 0) <span style="color: #3e999f;">"DONE"</span> <span style="color: #3e999f;">"TODO"</span>))))
(add-hook 'org-after-todo-statistics-hook 'org-summary-todo)
</pre>
</div>
</div></li></ol>
</div>
</div>

<div id="outline-container-orgad096a4" class="outline-3">
<h3 id="orgad096a4"><span class="section-number-3">20.6</span> Capture</h3>
<div class="outline-text-3" id="text-20-6">
<p>
<a href="http://www.gnu.org/software/emacs/manual/html_mono/org.html#Capture">Capturing</a> is crucial to a task system and in this vein, org is no
slouch. The capture templates define what get captures, where it
goes, and what the user needs to type.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-capture-templates
      '((<span style="color: #3e999f;">"t"</span> <span style="color: #3e999f;">"Todo"</span> entry
         (file <span style="color: #3e999f;">"~/Documents/Org/Refile.org"</span>)
         <span style="color: #3e999f;">"* TODO %?\n  %U\n%^{Score}p"</span> <span style="color: #8959a8;">:clock-in</span> t <span style="color: #8959a8;">:clock-resume</span> t)
        (<span style="color: #3e999f;">"r"</span> <span style="color: #3e999f;">"todo (Remember location)"</span> entry
         (file <span style="color: #3e999f;">"~/Documents/Org/Refile.org"</span>)
         <span style="color: #3e999f;">"* TODO %?\n  %U\n  %a"</span> <span style="color: #8959a8;">:clock-in</span> t <span style="color: #8959a8;">:clock-resume</span> t)
        (<span style="color: #3e999f;">"n"</span> <span style="color: #3e999f;">"Note"</span> entry
         (file <span style="color: #3e999f;">"~/Documents/Org/Refile.org"</span>)
         <span style="color: #3e999f;">"* %?                                                                            :NOTE:\n  %U\n  %a\n  :CLOCK:\n  :END:"</span>)
        (<span style="color: #3e999f;">"i"</span> <span style="color: #3e999f;">"Isabelle Journal"</span> entry (file+datetree <span style="color: #3e999f;">"~/Documents/Personal/Org/Isabelle.org"</span>)
         <span style="color: #3e999f;">"* %?\n\tEntered on %U"</span>)
        (<span style="color: #3e999f;">"j"</span> <span style="color: #3e999f;">"Johannes Journal"</span> entry (file+datetree <span style="color: #3e999f;">"~/Documents/Personal/Org/Johannes.org"</span>)
         <span style="color: #3e999f;">"* %?\n\tEntered on %U"</span>)
        (<span style="color: #3e999f;">"a"</span> <span style="color: #3e999f;">"Andrea Journal"</span> entry (file+datetree <span style="color: #3e999f;">"~/Documents/Personal/Org/Andrea.org"</span>)
         <span style="color: #3e999f;">"* %?\n\tEntered on %U"</span>)
        (<span style="color: #3e999f;">"e"</span> <span style="color: #3e999f;">"Journal"</span> entry (file+datetree <span style="color: #3e999f;">"~/Documents/Personal/Org/Journal.org"</span>)
         <span style="color: #3e999f;">"* %?\n\tEntered on %U"</span>)
        (<span style="color: #3e999f;">"c"</span> <span style="color: #3e999f;">"Capture current TODO mix in table"</span> table-line (file+headline <span style="color: #3e999f;">"~/Documents/Org/WeeklyReports.org"</span> <span style="color: #3e999f;">"Burndown"</span>)
         <span style="color: #3e999f;">"%(bnb/org-count-tasks-by-status)"</span>)
        (<span style="color: #3e999f;">"s"</span> <span style="color: #3e999f;">"Capture Weekly Score in table"</span> table-line (file+headline <span style="color: #3e999f;">"~/Documents/Org/WeeklyReports.org"</span> <span style="color: #3e999f;">"Scores"</span>)
         <span style="color: #3e999f;">"%(bnb/add-weekly-score-table-entry)"</span>)
        (<span style="color: #3e999f;">"w"</span> <span style="color: #3e999f;">"Weekly Time Table"</span> plain
         (file+function <span style="color: #3e999f;">"~/Documents/Org/WeeklyReports.org"</span> bnb/insert-weekly-clocking)
         <span style="color: #3e999f;">"%(bnb/insert-weekly-time-sheet)"</span> <span style="color: #8959a8;">:unnarrowed</span> t)
        (<span style="color: #3e999f;">"o"</span> <span style="color: #3e999f;">"org-outlook"</span> entry
         (file <span style="color: #3e999f;">"~/Documents/Org/Refile.org"</span>)
         <span style="color: #3e999f;">"* TODO EMAIL: %:title (%:sender)</span>
<span style="color: #3e999f;">  %c</span>

<span style="color: #3e999f;">  %?"</span> <span style="color: #8959a8;">:clock-in</span> t <span style="color: #8959a8;">:clock-resume</span> t)))
</pre>
</div>

<p>
There are five main capture templates here. The first two store a
todo item in my Refile.org file. The only difference is automatic
(contextual) link storage in the second case.
</p>

<p>
The next item simply stores a note. The next for "Weekly Report"
is a work in progress. I think that I'll have to either settle
for a proper datetree or write a custom function.
</p>

<p>
The final item is not for direct use, but through the
<code>org-protocol</code> interface and <code>org-outlook</code> usage. This lets me
add a link to an Outlook message on windows. I can then get an
email at work, mark it to store in emacs and quickly get back to
the message later.
</p>
</div>

<div id="outline-container-org732b9ac" class="outline-4">
<h4 id="org732b9ac"><span class="section-number-4">20.6.1</span> Capture-template helpers for data tables</h4>
<div class="outline-text-4" id="text-20-6-1">
<p>
These helpers provide functionality used in the capture templates
above.
</p>

<p>
Modified from <a href="http://sachachua.com/blog/2014/05/getting-r-ggplot2-work-emacs-org-mode-babel-blocks-also-tracking-number-todos/">Sacha Chua</a>, this code get the current mix of tasks
in the agenda files.  I use this as part of my weekly review for
task amount and mix at a glance.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/org-count-tasks-by-status</span> ()
  (<span style="color: #718c00;">interactive</span>)
  (<span style="color: #718c00;">let</span> ((counts (make-hash-table <span style="color: #8959a8;">:test</span> 'equal))
        (today (format-time-string <span style="color: #3e999f;">"%Y-%m-%d"</span> (current-time)))
        values output)
    (org-map-entries
     (<span style="color: #718c00;">lambda</span> ()
       (<span style="color: #718c00;">let</span> ((status (elt (org-heading-components) 2)))
         (<span style="color: #718c00;">when</span> status
           (puthash status (1+ (<span style="color: #718c00;">or</span> (gethash status counts) 0)) counts))))
     <span style="color: #3e999f;">"-HOME"</span>
     'agenda)
    (<span style="color: #718c00;">setq</span> values (mapcar (<span style="color: #718c00;">lambda</span> (x)
                           (<span style="color: #718c00;">or</span> (gethash x counts) 0))
                         '(<span style="color: #3e999f;">"DONE"</span> <span style="color: #3e999f;">"STARTED"</span> <span style="color: #3e999f;">"TODO"</span> <span style="color: #3e999f;">"WAITING"</span> <span style="color: #3e999f;">"CANCELLED"</span> <span style="color: #3e999f;">"SOMEDAY"</span>)))
    (<span style="color: #718c00;">setq</span> output
          (concat <span style="color: #3e999f;">"| "</span> today <span style="color: #3e999f;">" | "</span>
                  (mapconcat 'number-to-string values <span style="color: #3e999f;">" | "</span>)
                  <span style="color: #3e999f;">" | "</span>
                  (number-to-string (apply '+ values))
                  <span style="color: #3e999f;">" | "</span>
                  (number-to-string
                   (round (/ (* 100.0 (car values)) (apply '+ values))))
                  <span style="color: #3e999f;">"% |"</span>))
    (<span style="color: #718c00;">if</span> (called-interactively-p 'any)
        (insert output)
      output)))
</pre>
</div>

<p>
I also have a helper function to get the score of done tasks
closed within the last week.  I store this in a table line with
year and workweek number.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/add-weekly-score-table-entry</span> ()
  (<span style="color: #718c00;">let</span> ((score (apply
                 '+
                 (org-map-entries
                  (<span style="color: #718c00;">lambda</span> ()
                    (string-to-number (<span style="color: #718c00;">or</span> (org-entry-get (point) <span style="color: #3e999f;">"Score"</span>) <span style="color: #3e999f;">"0"</span>)))
                  <span style="color: #3e999f;">"/DONE"</span>
                  'agenda)))
         (year (format-time-string <span style="color: #3e999f;">"%Y"</span> (current-time)))
         (ww (number-to-string (bnb/workweek))))
    (format <span style="color: #3e999f;">"| %s | %s | %s |"</span> year ww score)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7da124e" class="outline-3">
<h3 id="org7da124e"><span class="section-number-3">20.7</span> Refile</h3>
<div class="outline-text-3" id="text-20-7">
<p>
<a href="http://www.gnu.org/software/emacs/manual/html_mono/org.html#Refiling-notes">Refiling notes</a> is also spectacular with Org. That is what makes
it possible for me to simply put every captured item into
Refile.org and worry about organization later.
</p>

<p>
For my setup, I use separate files that hold a singular Tasks
headline. Because of that, I turn on caching first.
</p>

<p>
For the refile targets, I will allow up to 2 levels of search for
filing in any of the agenda files. For refiling within the current
file, I set the max to five levels. Anything deeper than six
levels will exhaust the depth of my thought.
</p>

<p>
Finally, I set the filenames to be first for refiling.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-refile-use-cache t
      org-refile-targets '((org-agenda-files <span style="color: #8959a8;">:maxlevel</span> . 2)
                           (nil <span style="color: #8959a8;">:maxlevel</span> . 5))
      org-refile-use-outline-path 'file)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f0d62e" class="outline-3">
<h3 id="org2f0d62e"><span class="section-number-3">20.8</span> Agenda</h3>
<div class="outline-text-3" id="text-20-8">
<p>
Once I have captured and refiled my tasks, I need to remember to
do them and see what is on the agenda. The ways to view the tasks
at hand are nicely programmable.
</p>

<p>
Some basic settings control small tidbits in the agenda. I turn
on tags in the agenda line, show the logged items for the day,
and only show a time grid if a scheduled tasks exists.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-agenda-show-inherited-tags t
      org-agenda-log-mode-items '(clock)
      org-agenda-clockreport-parameter-plist '(<span style="color: #8959a8;">:link</span> nil <span style="color: #8959a8;">:maxlevel</span> 2 <span style="color: #8959a8;">:fileskip0</span> t)
      org-agenda-time-grid '((daily today require-timed)
                             <span style="color: #3e999f;">"----------------"</span>
                             (800 1000 1200 1400 1600 1800 2000)))
</pre>
</div>
</div>

<div id="outline-container-orga94f6ac" class="outline-4">
<h4 id="orga94f6ac"><span class="section-number-4">20.8.1</span> Views</h4>
<div class="outline-text-4" id="text-20-8-1">
<p>
The key to knowing what work there is the agenda views. These
provide a landscape to list, filter or manipulate
tasks. <code>org-agenda-custom-commands</code> defines which views are
available by default.
</p>

<p>
First, I define a little helper function (from Sacha Chua) to
display a note with agenda.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">defun</span> <span style="color: #f5871f;">bnb/org-agenda-with-tip</span> (arg)
  (org-agenda-list arg)
  (<span style="color: #718c00;">let</span> ((inhibit-read-only t)
        (pos (point)))
    (goto-char (point-max))
    (goto-char pos)))
</pre>
</div>

<p>
WIP from: <a href="https://github.com/fniessen/emacs-leuven/blob/master/org-custom-agenda-views.el">https://github.com/fniessen/emacs-leuven/blob/master/org-custom-agenda-views.el</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Reset everything to nil</span>
(<span style="color: #718c00;">setq</span> org-agenda-custom-commands nil)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"a"</span> <span style="color: #3e999f;">"Agenda"</span> bnb/org-agenda-with-tip))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"c"</span> . <span style="color: #3e999f;">"COLLECT..."</span>) t)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"cb"</span> <span style="color: #3e999f;">"CollectBox"</span>
               ((alltodo <span style="color: #3e999f;">""</span>))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"f"</span> . <span style="color: #3e999f;">"FOCUS..."</span>) t)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             `(<span style="color: #3e999f;">"f."</span> <span style="color: #3e999f;">"Today"</span>
               ((agenda <span style="color: #3e999f;">""</span>
                        ((org-agenda-entry-types '(<span style="color: #8959a8;">:timestamp</span> <span style="color: #8959a8;">:sexp</span>))
                         (org-agenda-overriding-header
                          (concat <span style="color: #3e999f;">"CALENDAR Today"</span>
                                  (format-time-string <span style="color: #3e999f;">"%a %d"</span> (current-time))))
                         (org-agenda-span 'day)))
                (tags-todo <span style="color: #3e999f;">"LEVEL=1+REFILE"</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"COLLECTBOX (Unscheduled)"</span>)))
                (tags-todo <span style="color: #3e999f;">"DEADLINE=\"&lt;+0d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE TODAY"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notedeadline))
                            (org-agenda-sorting-strategy '(priority-down))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE&lt;\"&lt;+0d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"OVERDUE"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notedeadline))
                            (org-agenda-sorting-strategy '(priority-down))))
                (agenda <span style="color: #3e999f;">""</span>
                        ((org-agenda-entry-types '(<span style="color: #8959a8;">:scheduled</span>))
                         (org-agenda-overriding-header <span style="color: #3e999f;">"SCHEDULED"</span>)
                         (org-agenda-skip-function
                          '(org-agenda-skip-entry-if 'todo 'done))
                         (org-agenda-sorting-strategy
                          '(priority-down time-down))
                         (org-agenda-span 'day)
                         (org-agenda-start-on-weekday nil)
                         (org-agenda-time-grid nil)))
                (todo <span style="color: #3e999f;">"DONE"</span>
                      ((org-agenda-overriding-header <span style="color: #3e999f;">"COMPLETED"</span>))))
               ((org-agenda-format-date <span style="color: #3e999f;">""</span>)
                (org-agenda-start-with-clockreport-mode nil))) <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"fh"</span> <span style="color: #3e999f;">"Hotlist"</span>
               ((tags-todo <span style="color: #3e999f;">"DEADLINE&lt;\"&lt;+0d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"OVERDUE"</span>)))
                (tags-todo <span style="color: #3e999f;">"DEADLINE&gt;=\"&lt;+0d&gt;\"+DEADLINE&lt;=\"&lt;+1w&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE IN NEXT 7 DAYS"</span>)))
                (tags-todo <span style="color: #3e999f;">"DEADLINE=\"\"+FLAGGED|DEADLINE&gt;\"&lt;+1w&gt;\"+FLAGGED"</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"FLAGGED"</span>))))
               ((org-agenda-todo-ignore-scheduled 'future)))  <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"r"</span> . <span style="color: #3e999f;">"REVIEW..."</span>) t)

(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"ra"</span> . <span style="color: #3e999f;">"All Tasks..."</span>) t)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rad"</span> <span style="color: #3e999f;">"All Tasks (grouped by Due Date)"</span>
               ((tags-todo <span style="color: #3e999f;">"DEADLINE&lt;\"&lt;+0d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"OVERDUE"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE=\"&lt;+0d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE TODAY"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE=\"&lt;+1d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE TOMORROW"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE&gt;\"&lt;+1d&gt;\"+DEADLINE&lt;=\"&lt;+7d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE WITHIN A WEEK"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE&gt;\"&lt;+7d&gt;\"+DEADLINE&lt;=\"&lt;+28d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE WITHIN A MONTH"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline))))
                (tags-todo <span style="color: #3e999f;">"DEADLINE&gt;\"&lt;+28d&gt;\""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"DUE LATER"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'notdeadline)))                           )
                (tags-todo <span style="color: #3e999f;">"TODO={WAIT}"</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"WAITING FOR"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'deadline))))
                (todo <span style="color: #3e999f;">""</span>
                           ((org-agenda-overriding-header <span style="color: #3e999f;">"WAITING FOR"</span>)
                            (org-agenda-skip-function
                             '(org-agenda-skip-entry-if 'deadline)))))
               ((org-agenda-sorting-strategy '(priority-down))
                (org-agenda-write-buffer-name <span style="color: #3e999f;">"All Tasks (grouped by Due Date)"</span>))
                 <span style="color: #3e999f;">"~/Documents/Org/all-tasks-by-due-date.pdf"</span>) <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"ra1"</span> <span style="color: #3e999f;">"All Tasks with a due date"</span>
               ((alltodo <span style="color: #3e999f;">""</span>))
               ((org-agenda-overriding-header <span style="color: #3e999f;">"All Tasks (sorted by Due Date)"</span>)
                (org-agenda-skip-function
                 '(org-agenda-skip-entry-if 'notdeadline))
                (org-agenda-sorting-strategy '(deadline-up)))) <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rt"</span> . <span style="color: #3e999f;">"Timesheet..."</span>) t)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"> <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Show what happened today.</span>
(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rtd"</span> <span style="color: #3e999f;">"Daily Timesheet"</span>
               ((agenda <span style="color: #3e999f;">""</span>))
               ((org-agenda-log-mode-items '(clock closed))
                (org-agenda-overriding-header <span style="color: #3e999f;">"DAILY TIMESHEET"</span>)
                (org-agenda-show-log 'clockcheck)
                (org-agenda-span 'day)
                (org-agenda-start-with-clockreport-mode t)
                (org-agenda-time-grid nil))) <span style="color: #c82829; font-weight: bold;">t)</span>

<span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">Show what happened this week.</span>
(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rtw"</span> <span style="color: #3e999f;">"Weekly Timesheet"</span>
               ((agenda <span style="color: #3e999f;">""</span>))
               (
                <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">(org-agenda-format-date "")</span>
                (org-agenda-overriding-header <span style="color: #3e999f;">"WEEKLY TIMESHEET"</span>)
                (org-agenda-skip-function '(org-agenda-skip-entry-if 'timestamp))
                (org-agenda-span 'week)
                (org-agenda-start-on-weekday 1)
                (org-agenda-start-with-clockreport-mode t)
                (org-agenda-time-grid nil))) <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rc"</span> . <span style="color: #3e999f;">"Calendar..."</span>) t)

(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rc7"</span> <span style="color: #3e999f;">"Events and appointments for 7 days"</span>
               ((agenda <span style="color: #3e999f;">""</span>))
               ((org-agenda-entry-types '(<span style="color: #8959a8;">:timestamp</span> <span style="color: #8959a8;">:sexp</span>))
                <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Calendar for 7 days")</span>
                <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">(org-agenda-repeating-timestamp-show-all t)</span>
                (org-agenda-span 'week)
                (org-agenda-format-date <span style="color: #3e999f;">"\n%a %d"</span>)
                <span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">(org-agenda-date-weekend ... new face ...)</span>
                (org-agenda-time-grid nil))) <span style="color: #c82829; font-weight: bold;">t)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-agenda-custom-commands
             '(<span style="color: #3e999f;">"rw"</span> <span style="color: #3e999f;">"Weekly review"</span>
               ((tags <span style="color: #3e999f;">"CATEGORY={@REFILE}&amp;LEVEL&lt;=2"</span>
                      ((org-agenda-overriding-header <span style="color: #3e999f;">"NEW TASKS"</span>)))
                (agenda <span style="color: #3e999f;">""</span>
                        ((org-agenda-clockreport-mode t)
                         (org-agenda-format-date
                          (concat <span style="color: #3e999f;">"\n"</span>
                                  <span style="color: #3e999f;">"%Y-%m-%d"</span> <span style="color: #3e999f;">" %a "</span>
                                  (make-string (window-width) ?_)))
                         (org-agenda-overriding-header <span style="color: #3e999f;">"PAST WEEK"</span>)
                         (org-agenda-prefix-format <span style="color: #3e999f;">" %?-11t %i %-12:c% s"</span>)
                         (org-agenda-show-log 'clockcheck)
                         (org-agenda-span 7)
                         (org-agenda-start-day <span style="color: #3e999f;">"-1w"</span>)
                         (org-deadline-warning-days 0)))
                (agenda <span style="color: #3e999f;">""</span>
                        ((org-agenda-overriding-header <span style="color: #3e999f;">"NEXT MONTH"</span>)
                         (org-agenda-span 'month)
                         (org-agenda-start-day <span style="color: #3e999f;">"+0d"</span>)
                         (org-deadline-warning-days 0)))
                (todo <span style="color: #3e999f;">"PROJECT"</span>
                      ((org-agenda-overriding-header <span style="color: #3e999f;">"PROJECT LIST"</span>)))
                (todo <span style="color: #3e999f;">"DONE|PROJECTDONE"</span>
                      ((org-agenda-overriding-header
                        <span style="color: #3e999f;">"Candidates to be archived"</span>)))))
 )
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8e908c; font-style: italic;">;; </span><span style="color: #8e908c; font-style: italic;">(setq org-agenda-custom-commands</span>
<span style="color: #8e908c; font-style: italic;">;;       </span><span style="color: #8e908c; font-style: italic;">'(</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("w" "Tasks waiting on something" tags "WAITING/!"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-use-tag-inheritance nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-scheduled nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-deadlines nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-with-date nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Waiting Tasks")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("r" "Refile New Notes and Tasks" tags "LEVEL=1+REFILE"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-todo-ignore-with-date nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-deadlines nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-scheduled nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Tasks to Refile")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("n" "Next" tags-todo "-WAITING-CANCELED/!NEXT"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-overriding-header "Next Tasks")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("A" "Tasks to be Archived" tags "LEVEL=2-REFILE/DONE|CANCELED"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-overriding-header "Tasks to Archive")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("u" "Upcoming tasks" tags "+SCHEDULED&lt;=\"&lt;+1w&gt;\"-TODO=\"DONE\"|+DEADLINE&lt;=\"&lt;+1w&gt;\"-TODO=\"DONE\""</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-overriding-header "Upcoming tasks")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("U" "Unscheduled tasks" todo "TODO"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-overriding-header "Unscheduled Tasks")</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-skip-function</span>
<span style="color: #8e908c; font-style: italic;">;;            </span><span style="color: #8e908c; font-style: italic;">(lambda nil</span>
<span style="color: #8e908c; font-style: italic;">;;              </span><span style="color: #8e908c; font-style: italic;">(org-agenda-skip-entry-if (quote scheduled) (quote deadline))))))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("P" "Printable Agenda" ;tags-todo "-DONE-CANCELED-SOMEDAY"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((tags-todo "+IGNORE"</span>
<span style="color: #8e908c; font-style: italic;">;;                      </span><span style="color: #8e908c; font-style: italic;">((org-agenda-overriding-header "\n== Upcoming Items ==\n")))</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(agenda "" ((org-agenda-span 14)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-start-on-weekday nil)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-prefix-format "[ ] %T:\t")</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-repeating-timestamp-show-all t)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-deadline-warning-days 7)))</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(tags-todo "-DRB-SOMEDAY-REFERENCE-BNBECKWITH"</span>
<span style="color: #8e908c; font-style: italic;">;;                      </span><span style="color: #8e908c; font-style: italic;">((org-agenda-prefix-format "[ ] %T:\t")</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-sorting-strategy '(tag-up priority-down))</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-keyword-format "")</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-with-date nil)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-scheduled nil)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-deadlines nil)</span>
<span style="color: #8e908c; font-style: italic;">;;                       </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "\nTasks by Context\n------------------\n"))))</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((ps-number-of-columns 2)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(ps-landscape-mode t)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-with-colors nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-compact-blocks t)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-remove-tags t)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(ps-paper-type 'a4))</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">("~/TODO.pdf" "~/TODO.ps"))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("l" "Scoreless" tags-todo "+Score&lt;1"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-todo-ignore-with-date nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-scheduled nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-deadlines nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Scoreless Tasks")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("h" "Habits" tags "STYLE=\"habit\""</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-todo-ignore-with-date nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-scheduled nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-todo-ignore-deadlines nil)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Habits")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("#" "Stuck Projects" tags-todo "LEVEL=2-REFILE+PROJECT|LEVEL=1+REFILE/!-DONE-CANCELED"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-skip-function 'bh/skip-non-stuck-projects)</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Stuck Projects")))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("z" "Agenda (including Personal Files)" agenda ""</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-files (list "~/Documents/Personal/Org/"))))</span>
<span style="color: #8e908c; font-style: italic;">;;         </span><span style="color: #8e908c; font-style: italic;">("c" "Select default clocking task" tags "LEVEL=2-REFILE"</span>
<span style="color: #8e908c; font-style: italic;">;;          </span><span style="color: #8e908c; font-style: italic;">((org-agenda-skip-function</span>
<span style="color: #8e908c; font-style: italic;">;;            </span><span style="color: #8e908c; font-style: italic;">'(org-agenda-skip-subtree-if 'notregexp "^\\*\\* Organization"))</span>
<span style="color: #8e908c; font-style: italic;">;;           </span><span style="color: #8e908c; font-style: italic;">(org-agenda-overriding-header "Set default clocking task with C-u C-u I")))))</span>
</pre>
</div>

<p>
Phew! That is a lot of lisp! It is easiest to describe each view
by the key that triggers it.
</p>

<ul class="org-ul">
<li><code>a</code> Agenda with tip (keystroke tip)</li>
<li><code>w</code> Tasks waiting on something</li>
<li><code>r</code> Refile New notes and tasks</li>
<li><code>n</code> Next
Any task with the NEXT tag</li>
<li><code>A</code> Tasks ready for Archive</li>
<li><code>u</code> Upcoming tasks
Scheduled or due in the next week.</li>
<li><code>U</code> Unscheduled tasks</li>
<li><code>P</code> Printable agenda
Formats tasks at the top with upcoming items below.</li>
<li><code>S</code> Scoreless tasks
Use this to get the scoreless tasks and edit in column mode</li>
<li><code>h</code> Habits</li>
<li><code>#</code> Stuck projects</li>
<li><code>z</code> Agenda with Personal Files</li>
<li><code>c</code> Select default clocking task</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgfefd52e" class="outline-3">
<h3 id="orgfefd52e"><span class="section-number-3">20.9</span> Export</h3>
<div class="outline-text-3" id="text-20-9">
<p>
Here are some global export settings make sense for HTML and \LaTeX.
</p>
</div>

<div id="outline-container-orga393e52" class="outline-4">
<h4 id="orga393e52"><span class="section-number-4">20.9.1</span> HTML</h4>
<div class="outline-text-4" id="text-20-9-1">
<p>
For HTML, I just want to inline the links to images.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-export-html-inline-images t)
</pre>
</div>

<p>
I also used to suppress the postamble with
<code>org-export-html-postamble</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-html-postamble nil)
</pre>
</div>

<p>
I'll use the <i>fancy</i> HTML5 export by default.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-html-doctype <span style="color: #3e999f;">"html5"</span>
      org-html-html5-fancy t)
</pre>
</div>

<p>
I like to have striped tables in email, but this is terribly
difficult due to cruddy CSS support.  Luckily,
<code>org-html-table-row-tags</code> saves the day and assigns the right
classes to the table rows.  Now styling can be done in CSS-reduced
instances.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-html-table-row-tags
      (cons '(<span style="color: #718c00;">cond</span> (top-row-p <span style="color: #3e999f;">"&lt;tr class=\"tr-top\"&gt;"</span>)
                   (bottom-row-p <span style="color: #3e999f;">"&lt;tr class=\"tr-bottom\"&gt;"</span>)
                   (t (<span style="color: #718c00;">if</span> (= (mod row-number 2) 1)
                          <span style="color: #3e999f;">"&lt;tr class=\"tr-odd\"&gt;"</span>
                        <span style="color: #3e999f;">"&lt;tr class=\"tr-even\"&gt;"</span>)))
            <span style="color: #3e999f;">"&lt;/tr&gt;"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fb0449" class="outline-4">
<h4 id="org0fb0449"><span class="section-number-4">20.9.2</span> LaTeX</h4>
<div class="outline-text-4" id="text-20-9-2">
<p>
For \LaTeX, I want to convert fragments to images, and use minted
for any source blocks. I also want to have <code>xelatex</code> as the
backend.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-export-latex-listings 'minted
      org-export-latex-custom-lang-environments
      '((emacs-lisp <span style="color: #3e999f;">"common-lispcode"</span>))
      org-export-latex-minted-options '()
      org-latex-to-pdf-process
      '(<span style="color: #3e999f;">"xelatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
        <span style="color: #3e999f;">"xelatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
        <span style="color: #3e999f;">"xelatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>))
</pre>
</div>


<p>
Also, I want to enable some of the other contributed
exporters. To do this, simply require the files necessary that
are not on by default.
</p>

<p>
I add exporters for Markdown (<code>ox-md.el</code>) and beamer
(<code>ox-beamer.el</code>).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ox-md</span>     <span style="color: #8959a8;">:defer</span> t)
(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ox-beamer</span> <span style="color: #8959a8;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5b64f96" class="outline-4">
<h4 id="org5b64f96"><span class="section-number-4">20.9.3</span> Office Documents</h4>
<div class="outline-text-4" id="text-20-9-3">
<p>
To begin this process, we enable the ODT exporter.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ox-odt</span> <span style="color: #8959a8;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc3ea17" class="outline-4">
<h4 id="orgcc3ea17"><span class="section-number-4">20.9.4</span> EPUB</h4>
<div class="outline-text-4" id="text-20-9-4">
<p>
E-readers may be a thing that sticks around.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ox-epub</span> <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org346592c" class="outline-3">
<h3 id="org346592c"><span class="section-number-3">20.10</span> Clocking</h3>
<div class="outline-text-3" id="text-20-10">
<p>
I have found clocking to be useful in understanding where my time
goes. And Org makes this easy, fast and painless to do. So very
nice.
</p>

<p>
The clock has some general settings around persistence (resuming
clocks), history length and resuming a task after clocking in
twice (interrupted task).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-clock-persistence-insinuate)
(<span style="color: #718c00;">setq</span> org-clock-history-length 28
      org-clock-in-resume t)
</pre>
</div>

<p>
Behavior of the clock can change to accommodate other needs. I
like having clocks log into a specific drawer. Also, it is nice
to remove zero-time clocks and clock out automatically when an
item completes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-clock-into-drawer <span style="color: #3e999f;">"CLOCK"</span>
      org-clock-out-remove-zero-time-clocks t
      org-clock-out-when-done t)
</pre>
</div>

<p>
Two settings help resolve most clock issues that I have
seen. Persisting the clock across sessions helps prevent loss of
time by accident. Auto-resolution of open clocks help prompt how
to handle the situation where a dangling clock exists.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-clock-persist 'history
      org-clock-auto-clock-resolution 'when-no-clock-is-running)
</pre>
</div>

<p>
Two final settings regarding clocking setup how I change and view
the clocks. I want any clock reports to include the currently
clocked task as well. And for clock editing, I change to 15
minute increments.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-clock-report-include-clocking-task t
      org-time-stamp-rounding-minutes '(1 15))
</pre>
</div>
</div>
</div>

<div id="outline-container-org407dd53" class="outline-3">
<h3 id="org407dd53"><span class="section-number-3">20.11</span> Modules</h3>
<div class="outline-text-3" id="text-20-11">
<p>
Org-modules allow for specific functionality within org-mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-modules
      '(org-bbdb
        org-bibtex
        org-crypt
        org-gnus
        org-id
        org-info
        org-jsinfo
        org-habit
        org-inlinetask
        org-irc
        org-plot
        org-protocol
        org-bookmark
        org-calc))
</pre>
</div>
</div>

<div id="outline-container-orge18a06f" class="outline-4">
<h4 id="orge18a06f"><span class="section-number-4">20.11.1</span> Org-protocol</h4>
<div class="outline-text-4" id="text-20-11-1">
<p>
For some reason, I have to load <code>org-protocol</code> explicitly in
order to work.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">org-protocol</span> <span style="color: #8959a8;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org667a808" class="outline-4">
<h4 id="org667a808"><span class="section-number-4">20.11.2</span> Crypt</h4>
<div class="outline-text-4" id="text-20-11-2">
<p>
Encrypts contents of headlines with <code>gpg</code> when saved
with the "crypt" tag.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">org-crypt</span>
  <span style="color: #8959a8;">:defer</span> t
  <span style="color: #8959a8;">:config</span>
  (org-crypt-use-before-save-magic)
  (<span style="color: #718c00;">setq</span> org-tags-exclude-from-inheritance '(<span style="color: #3e999f;">"crypt"</span>)))
</pre>
</div>

<p>
The <code>org-crypt-key</code> variable will let this use an address from
the public keyring.
</p>
</div>
</div>

<div id="outline-container-org0e75911" class="outline-4">
<h4 id="org0e75911"><span class="section-number-4">20.11.3</span> Habit</h4>
<div class="outline-text-4" id="text-20-11-3">
<p>
Some tasks repeat, but you still want to log when you have done
it. I use this to help me always do my weekly or yearly
reviews. By including it in <code>org-modules</code>, habits get activated.
</p>

<p>
My one setting blow sets a width for the graph in Agenda View.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-habit-graph-column 50)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org77c903c" class="outline-3">
<h3 id="org77c903c"><span class="section-number-3">20.12</span> Babel</h3>
<div class="outline-text-3" id="text-20-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '((calc       . t)
   (clojure    . t)
   (C          . t)
   (ditaa      . t)
   (dot        . t)
   (emacs-lisp . t)
   (gnuplot    . t)
   (latex      . t)
   (perl       . t)
   (plantuml   . t)
   (python     . t)
   (shell      . t)
   (sqlite     . t)))
</pre>
</div>
</div>

<div id="outline-container-orgcb5fee7" class="outline-4">
<h4 id="orgcb5fee7"><span class="section-number-4">20.12.1</span> Extra Babel Packages</h4>
<div class="outline-text-4" id="text-20-12-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">ob-http</span>
  <span style="color: #8959a8;">:ensure</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1cc0da9" class="outline-3">
<h3 id="org1cc0da9"><span class="section-number-3">20.13</span> Miscellaneous Settings</h3>
<div class="outline-text-3" id="text-20-13">
</div><div id="outline-container-orge9add60" class="outline-4">
<h4 id="orge9add60"><span class="section-number-4">20.13.1</span> Columns</h4>
<div class="outline-text-4" id="text-20-13-1">
<p>
The default columns are as follows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-columns-default-format
      <span style="color: #3e999f;">"%80ITEM(Task) %5Score{+} %10Effort(Effort){:} %10CLOCKSUM"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org25676b8" class="outline-4">
<h4 id="org25676b8"><span class="section-number-4">20.13.2</span> Automatically save org files</h4>
<div class="outline-text-4" id="text-20-13-2">
<p>
I like to save early and often. In earlier versions of orgmode, I
sometimes had the capture buffer/timer crash on me. So, now I
save at the top of every hour to be sure.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(run-at-time <span style="color: #3e999f;">"00:59"</span> 3600 'org-save-all-org-buffers)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ee629c" class="outline-4">
<h4 id="org5ee629c"><span class="section-number-4">20.13.3</span> File Applications</h4>
<div class="outline-text-4" id="text-20-13-3">
<p>
This list lets org know how to handle the links of given file
types. Most things open inside <code>emacs</code>, but the others
set to default rely on the OS to supply a program.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-file-apps
      '((auto-mode . emacs)
          (<span style="color: #3e999f;">"\\.x?html?\\'"</span> . default)
          (<span style="color: #3e999f;">"\\.pdf\\'"</span> . default)
          (<span style="color: #3e999f;">"\\.mm\\'"</span> . default)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org55d26d0" class="outline-4">
<h4 id="org55d26d0"><span class="section-number-4">20.13.4</span> Goto Interface</h4>
<div class="outline-text-4" id="text-20-13-4">
<p>
By using <code>C-c C-j</code>, you can jump easily around a large orgfile
such as this one. Naturally, the interface you use to do so is
customizable.
</p>

<p>
I explicitly set it to the default because I sometimes go back
and forth with the default and <code>outline-path-completion</code> setting.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-goto-interface 'outline-path)
</pre>
</div>
</div>
</div>

<div id="outline-container-org52dce0a" class="outline-4">
<h4 id="org52dce0a"><span class="section-number-4">20.13.5</span> Special Control Keys</h4>
<div class="outline-text-4" id="text-20-13-5">
<p>
Orgmode has a different idea of some of the default emacs
commands to make it easier to work with the structures involved.
</p>

<p>
For <code>C-a</code> or <code>C-e</code> within a headline, it will only try to
navigate the headline text the first time. Additional keypresses
will move to the true beginning/ending of lines.
</p>

<p>
<code>C-k</code> also can behave specially in headlines depending on its
location. When point is at the beginning, it will kill the
headline and the folded subtree below. In the middle of a
headline, it kills the headline text up to the tags. After the
headline text, it kills the tags.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-special-ctrl-a/e t
      org-special-ctrl-k t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org77f5a80" class="outline-4">
<h4 id="org77f5a80"><span class="section-number-4">20.13.6</span> Auto-revert mode</h4>
<div class="outline-text-4" id="text-20-13-6">
<p>
If the org files are under DVCS like git, then the edits may
happen while open in emacs.
</p>

<p>
This is a global setting, but most useful for the org files that
exists elsewhere.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> global-auto-revert-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7d03103" class="outline-4">
<h4 id="org7d03103"><span class="section-number-4">20.13.7</span> IDO Integration</h4>
<div class="outline-text-4" id="text-20-13-7">
<p>
IDO integrates well into orgmode. Anytime completion is
necessary, I like to use the IDO mechanics.
</p>

<p>
The <code>outline-path-completion</code> may conflict with IDO, so then it
is best to have it not use IDO in this case.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-completion-use-ido t
      org-outline-path-complete-in-steps nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org74c2c51" class="outline-4">
<h4 id="org74c2c51"><span class="section-number-4">20.13.8</span> Display settings</h4>
<div class="outline-text-4" id="text-20-13-8">
<p>
There are a collection of settings that define how the
headlines, subtrees, and notes render.
</p>

<p>
For the headline stars, there are two settings of note. I am
explicit that I do <b>not</b> want only odd levels. I also like to
hide the leading stars.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-odd-levels-only nil
      org-hide-leading-stars nil)
</pre>
</div>

<p>
Cycling the headline states can produce different views of the
files. I like this to be as compact as possible, so I try to
squash the lines between the collapsed trees. There is also a
flag to open a file collapsed. This I like too &#x2013; I get a
compact view of the file and can jump to a relevant section with
<code>C-c C-j</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-cycle-separator-lines 0
      org-startup-folded 'content)
</pre>
</div>

<p>
When using SRC-blocks, org can provide highlighting native to
the SRC type. Note that this may slow down some files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-src-fontify-natively t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c5cec4" class="outline-4">
<h4 id="org9c5cec4"><span class="section-number-4">20.13.9</span> Insertion</h4>
<div class="outline-text-4" id="text-20-13-9">
<p>
I define when org should leave a blank line before an
item. In my case, it is headings and plain list items.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-blank-before-new-entry '((heading)
                                   (plain-list-item)))
</pre>
</div>

<p>
Also, when inserting a new heading, do so after the current
subtree.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-insert-heading-respect-content t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6f58f7" class="outline-4">
<h4 id="orge6f58f7"><span class="section-number-4">20.13.10</span> Properties</h4>
<div class="outline-text-4" id="text-20-13-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> org-global-properties
      '((<span style="color: #3e999f;">"STYLE_ALL"</span>  . <span style="color: #3e999f;">"habit"</span>)
        (<span style="color: #3e999f;">"Effort_ALL"</span> . <span style="color: #3e999f;">"0:10 0:30 1:00 2:00 3:00 4:00"</span>)
        (<span style="color: #3e999f;">"Score_ALL"</span>  . <span style="color: #3e999f;">"1 2 3 5 8"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org64fef65" class="outline-4">
<h4 id="org64fef65"><span class="section-number-4">20.13.11</span> Calendar</h4>
<div class="outline-text-4" id="text-20-13-11">
<p>
<a href="http://acidwords.com/posts/2017-02-16-displaying-org-mode-appointments-in-calendar.html">Acidwords.com</a> outlined a nice way to highlight days in the
calendar.  These settings are a result of that work.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> calendar-mark-diary-entries-flag t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbfedea1" class="outline-3">
<h3 id="orgbfedea1"><span class="section-number-3">20.14</span> Org-drill</h3>
<div class="outline-text-3" id="text-20-14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">org-drill</span> <span style="color: #8959a8;">:defer</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgec15b30" class="outline-2">
<h2 id="orgec15b30"><span class="section-number-2">21</span> Calc</h2>
<div class="outline-text-2" id="text-21">
<p>
Working in computer land, I add these additional units to <code>calc</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">use-package</span> <span style="color: #4271ae;">calc</span>
  <span style="color: #8959a8;">:init</span>
  (<span style="color: #718c00;">setq</span> math-additional-units
      '((GiB <span style="color: #3e999f;">"1024 * MiB"</span> <span style="color: #3e999f;">"Giga Byte"</span>)
        (MiB <span style="color: #3e999f;">"1024 * KiB"</span> <span style="color: #3e999f;">"Mega Byte"</span>)
        (KiB <span style="color: #3e999f;">"1024 * B"</span>   <span style="color: #3e999f;">"Kilo Byte"</span>)
        (B   nil          <span style="color: #3e999f;">"Byte"</span>)
        (Gib <span style="color: #3e999f;">"1024 * Mib"</span> <span style="color: #3e999f;">"Giga bit"</span>)
        (Mib <span style="color: #3e999f;">"1024 * Kib"</span> <span style="color: #3e999f;">"Mega bit"</span>)
        (Kib <span style="color: #3e999f;">"1024 * b"</span>   <span style="color: #3e999f;">"Kilo bit"</span>)
        (b   nil          <span style="color: #3e999f;">"bit"</span>)
        )))
</pre>
</div>
</div>
</div>

<div id="outline-container-org76c4b81" class="outline-2">
<h2 id="org76c4b81"><span class="section-number-2">22</span> Server</h2>
<div class="outline-text-2" id="text-22">
<p>
<a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Emacs-Server">Using Emacs as a server</a> is a great way to keep the power
responsive.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">when</span> (<span style="color: #718c00;">and</span> (<span style="color: #718c00;">or</span> (eq system-type 'windows-nt) (eq system-type 'darwin)) 
           (not (<span style="color: #718c00;">and</span> (boundp 'server-clients) server-clients))
           (not (daemonp)))
  (server-start))
</pre>
</div>

<p>
I need to look into the TCP connections to see how
that work across machines. Perhaps it can be useful in a
multi-machine work environment.
</p>
</div>
</div>

<div id="outline-container-org73f00b9" class="outline-2">
<h2 id="org73f00b9"><span class="section-number-2">23</span> Local customizations (custom.el)</h2>
<div class="outline-text-2" id="text-23">
<p>
I typically use the customize interface to generate any local
settings such as proxies, paths, fonts, etc. that may vary from
machine to machine.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">setq</span> custom-file <span style="color: #3e999f;">"~/.emacs.d/custom.el"</span>)
(load-file custom-file)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgde3210c" class="outline-2">
<h2 id="orgde3210c"><span class="section-number-2">24</span> Local customizations (user-login-name)</h2>
<div class="outline-text-2" id="text-24">
<p>
I also intend to have a generic call to an installed local file
that may need to behave differently from <code>custom.el</code>. This loads
last so that it can modify any existing setting made here to work
on the specific system in question.
</p>

<p>
In the code below, I add <code>~/.emacs.d/</code> to the load path and have a
protected call to <code>load-library</code>.  If the file exists, it gets
loaded, otherwise the error normally returned if the file is
non-existent gets ignored.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #718c00;">condition-case</span> err
    (<span style="color: #718c00;">progn</span>
      (load-file (format <span style="color: #3e999f;">"~/.emacs.d/%s.el"</span>  user-login-name))
      (message <span style="color: #3e999f;">"Loaded local settings file %s.el"</span> user-login-name))
  (file-error
   (message <span style="color: #3e999f;">"Skipping %s library as it does not exist."</span> user-login-name))
  nil)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Benjamin Beckwith</p>
<p class="date">Created: 2017-03-13 Mon 13:55</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
